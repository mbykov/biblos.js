!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("lodash")},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return i}));const i={code:"grc",host:"http://diglossa.org:5984",version:"https://github.com/mbykov/biblos.js/releases/latest",pages:["home","main","remote-dicts","arrange-dicts","db-info","arrange-dicts","help","dict-edit","local-chunk","local-dict-full","local-dict-item","localdict-help","about","authentic","code","license","acknowledgements","arrange-dicts","contacts","csv","cleanup"],defstate:"home",batch_size:1e3,splitSizes:[50,50],langs:["eng","deu","rus"],ldname:"local",deflang:"eng"}},function(e,t){e.exports=require("antrax/dist/lib/pouch")},function(e,t){e.exports=require("orthos")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("mousetrap")},function(e){e.exports=JSON.parse('{"name":"development","description":"Add here any environment specific stuff you like."}')},function(e,t){e.exports=require("antrax")},,function(e,t){e.exports=require("electron-clipboard-extended")},,function(e,t){e.exports=require("speckled-band")},function(e,t){e.exports=require("split.js")},,function(e,t,n){var i=n(17);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(18)(!1);var i=n(19)(n(20));t.push([e.i,'/* @import "./treeview.min.css" */\n\n/* .is-shown { */\n/*     display: block!important; */\n/* } */\n\n.is-hidden {\n  display: none!important;\n}\n\n#main {\n    margin: 0;\n    padding: 10px;\n    height: 100%;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n#home {\n    padding-top: 25px;\n}\n\n#title {\n    margin: 0;\n    padding: 10px;\n    height: 100%;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n.section {\n    margin: 15px;\n    margin-left: 25px;\n    display: block;\n    overflow-y: hidden;\n    height: 100%;\n    padding-bottom: 120px;\n    margin-bottom: 120px;\n    font-family: "Helvetica Neue", Helvetica, Arial;\n    /* font-size: 1em; */\n    position: relative;\n}\n\n.split {\n    overflow-y: auto;\n    overflow-x: hidden;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.gutter {\n    background-color: #eee;\n    background-repeat: no-repeat;\n    background-position: 50%;\n    height: 100%;\n    width: 5px;\n}\n\n.gutter.gutter-horizontal {\n    background-image: url('+i+");\n    cursor: ew-resize;\n}\n\n.split, .gutter.gutter-horizontal {\n    height: 100%;\n    float: left;\n}\n\n#source {\n    font-family: \"Helvetica Neue\", Helvetica, Arial;\n    font-size: 1em;\n    padding-left: 15px;\n    padding-top: 25px;\n    padding-bottom: 25px;\n    overflow-y: hidden;\n    line-height: 1.5;\n    /* overflow-x: hidden; */\n}\n\n#result {\n    font-family: \"Helvetica Neue\", Helvetica, Arial;\n    font-size: 0.9em;\n    padding-left: 15px;\n    padding-top: 25px;\n    padding-bottom: 25px;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n.link {\n  cursor: pointer;\n  color: maroon;\n}\n\n.dinfo {\n    /* cursor: pointer; */\n    color: maroon;\n}\n\n.dname {\n    cursor: pointer;\n}\n\n.clause {\n    background-color: #eee;\n}\n\n\n/* span { */\n    /* padding-right: 5px; */\n/* } */\n\nspan.space {\n    padding-right: 0;\n}\n\nspan.tibphrase {\n    padding-right: 0;\n}\n\nspan.term {\n    padding-right: 0;\n}\n\nspan.tibphrase:hover {\n    /* background-color: #eee8aa; */\n}\n\nspan.tibwf:hover {\n  background-color: #eee8aa;\n}\n\n.grey {\n    color: grey;\n}\n\nli.hidden {\n  display: none;\n}\n\n.hidden {\n    display: none; /* !important */;\n}\n\n.activetrn {\n    display: block!important;\n}\n\ninput[type='file'] {\n    color: transparent;\n}\n\n.maroon {\n    color: maroon;\n}\n\n/* span.clear { clear: left; display: block; } */\n\n#book {\n  padding-top: 0;\n  margin: 0;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: hidden;\n}\n\n#headers {\n  margin: 0;\n  height: 30px;\n}\n\n#headers > p {\n  margin: 0;\n  -webkit-margin-before: 0;\n}\n\n#trns > p.hidden {\n  display: none;\n}\n\n.hleft {\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  /* padding-left: 15px; */\n  padding-right: 15px;\n  color: maroon;\n}\n\n.hright {\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  padding-left: 15px;\n  padding-right: 15px;\n  color: maroon;\n}\n\n.header {\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  background: white;\n  padding: 5px;\n  padding-left: 15px;\n  padding-right: 15px;\n}\n\n/* #headers { */\n/*   height: 16px; */\n/*   padding-bottom: 10px; */\n/* } */\n\n#book > div.hright > ul  {\n  margin: 0;\n  padding: 0;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n}\n\n#book {\n  margin: 0;\n  padding: 0;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n}\n\n.bookTitle {\n  margin-top: 80px;\n  margin-left: 50px;\n}\n\n.author {\n  font-size: 18px;\n}\n\n.title {\n  color: maroon;\n  font-size: 24px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.check-name {\n  padding-left: 5px;\n}\n\nspan.query {\n    cursor: pointer;\n    color: maroon;\n    font-weight: bold;\n}\n\n.libauth {\n  padding-top: 25px;\n  cursor: pointer;\n}\n\n.lib-auth {\n  padding: 10px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial;\n  font-size: 16px;\n  color: maroon;\n}\n\n.lib-auth::after {\n  content: ':'\n}\n\n.lib-title {\n  padding: 10px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial;\n  font-size: 16px;\n}\n\n.book-content {\n  padding-left: 10px;\n  font-size: 18px;\n  color: maroon;\n}\n\n/* #book > div.hleft.header > div > div:nth-child(2) */\ndiv.hleft.header > div.tree {\n  /* display: none; */\n}\n\n.qlink {\n  padding-right: 15px;\n  color: maroon;\n  cursor: pointer;\n}\n\n.qtext {\n  padding-left: 15px;\n}\n\n/* #source > div:nth-child(2) > p:nth-child(4) */\n/* #source > div:nth-child(2) > div > p:nth-child(2) */\ndiv.qtext > p.hidden {\n  display: none;\n}\n\n.disclaimer {\n  font-size: 10px;\n  }\n\n.qtitle {\n  color: maroon;\n  font-size: 24px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.statline {\n    padding-left: 25px;\n}\n\n.statnic {\n    width: 150px;\n}\n\n.statnic::after {\n    content: ': ';\n}\n\n.green {\n    color: green;\n}\n\n.red {\n    color: red;\n    font-weight: bold;\n}\n\n#transcript {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  /* background-color: white; */\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1100;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  font-size: 16px;\n  padding: 3px;\n  background-color: #e6ffcc;\n}\n\n#ambi {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  padding: 3px;\n  background-color: white;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.upper {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1001;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  padding: 3px;\n  background-color: white;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.danger {\n  background-color: #fff2e6;\n}\n\n#ambi > ul {\n  /* magrin: 0; */\n  /* padding-inline-start: 0; */\n  /* margin-block-start: 0; */\n  /* margin-block-end: 0; */\n  padding: 3px;\n}\n\n#ambi > ul > li > span {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.upper > ul > li > span {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\nspan.active-form {\n    cursor: pointer;\n}\n\nspan.active-form:hover {\n    background-color: #eee8aa;\n}\n\nspan.active-dict {\n    cursor: pointer;\n}\n\nspan.active-dict:hover {\n    background-color: #eee8aa;\n}\n\n.punct {\n    padding-right: 2px;\n}\n\n/* .dict-div { */\n/* } */\n\n.dict-query {\n    color: maroon;\n    background-color: #eee;\n    padding-left: 5px;\n    padding-top: 5px;\n    margin-top: 5px;\n    /* padding-right: 15px; */\n}\n\n.dict-header {\n    margin-top: 5px;\n    cursor: pointer;\n}\n\n.dict-div {\n}\n\n.dict-ul {\n  font-size: small;\n  /* padding-left: 15px; */\n}\n\n.dict-dname {\n  float: right;\n  color: green;\n}\n\n.dict-gends {\n    font-style: italic;\n    padding-left: 5px;\n}\n\n.dict-pos {\n    font-style: italic;\n    background-color: #99ff99;\n    margin-left: 5px;\n    margin-right: 5px;\n}\n\n.dict-rdict {\n    width: 50%;\n    padding: 5px;\n}\n\nul.dict-fls {\n    padding-left: 15px;\n    padding-top: 5px;\n    padding-bottom: 5px;\n    background-color: #A4F3F3;\n}\n\nul.dict-trns {\n    padding-top: 5px;\n    padding-left: 25px;\n    line-height: 1.3;\n    list-style: none;\n}\n\n.ellipsis::after {\n    content: '...'\n}\n\n.dict-article {\n    padding-top: 12px;\n}\n\n.dicts-table {\n  width: 100%;\n  margin-top: 25px;\n}\n\n\n#arrange-dicts {\n  margin-top: 50px;\n}\n\n.dictname {\n  cursor: pointer;\n  color: maroon;\n}\n\n.dict-check {\n  width: 20px;\n  height: 20px;\n}\n\n.active-dict {\n  width: 100px;\n}\n\n#pechatxt {\n  padding-left: 15px;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.dictcsv {\n  color: maroon;\n  cursor: pointer;\n}\n\n.table-header {\n  color: maroon;\n  font-weight: bold;\n}\n\nul.info-table {\n    line-height: 1.5em;\n    list-style: none;\n\n}\n\n.popup {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    color: black;\n    display: 'block';\n    padding: 3px;\n    position: absolute;\n    z-index: 1001;\n    box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n    height: auto;\n    top: 250px;\n    left: 300px;\n    background-color: white;\n    font-size: 1.0em;\n}\n\n.comp-segment {\n    /* color: 'red'; */\n}\n\n.comp-segment:after {\n    content: ' - ';\n}\n\n.sect-dicts-ul {\n    list-style: none;\n    padding: 5px;\n    background-color: #E9FED6;\n}\n\n.sect-dict-line {\n    cursor: pointer;\n}\n\n.cognate-list {\n    padding: 5px;\n    background-color: #E9FED6;\n}\n\nli.cognate-line {\n    padding-right: 5px;\n    padding-left: 5px;\n}\n\nli.cognate-line:hover {\n    /* background-color: #E9FED6; */\n    padding-right: 5px;\n    padding-left: 5px;\n    background-color: white;\n}\n\n.table-chunk-header {\n    color: maroon;\n    font-weight: bold;\n    margin-bottom: 15px;\n    paddicg-bottom: 15px;\n}\n\n.table-line {\n    cursor: pointer;\n}\n\n.table-line:hover {\n    background-color: #eee8aa;\n}\n\n.dict-item {\n    padding-right: 5px;\n}\n\n.dict-item-rdict {\n    color: maroon;\n    font-weight: bold;\n}\n\n#dict-item-pos {\n    color: green;\n}\n\n.dict-item-input-text {\n    width: 80%;\n}\n\n.submit {\n    margin-top: 25px;\n    margin-right: 5px;\n}\n\n.section-ul {\n    list-style-type: disc;\n    margin-left: 15px;\n}\n\nul.dict-fls {\n    list-style: none;\n    line-height: 1em;\n}\n\n.compound-list {\n    list-style: none;\n}\n\n.error-message {\n    color: red;\n    padding: 10px;\n}\n\n.section-descr {\n    font-size: 0.9em;\n}\n\n#dict-table-submit-ok {\n    margin-bottom: 100px;\n}\n\n#new-dict-item-link {\n    margin-top: 25px;\n}\n\n.local-item-pos {\n    margin-left: 15px;\n    margin-right: 5px;\n}\n\n.banner {\n    margin-top: 15px;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(r).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){e.exports=n.p+"aeed77a8b9081818ddf762cf8f7e2829.png"},function(e,t,n){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=s.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),c=null,d=0,p=[],u=n(22);function f(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function g(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=p[p.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function b(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return x(t,e.attrs),m(e,t),t}function x(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function v(e,t){var n,i,o,r;if(t.transform&&e.css){if(!(r="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var a=d++;n=c||(c=b(t)),i=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",x(t,e.attrs),m(e,t),t}(t),i=L.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),i=C.bind(null,n),o=function(){h(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=g(e,t);return f(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&f(g(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var y,k=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function C(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function L(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=u(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("markdown-it")},function(e,t){e.exports=require("markdown-it-attrs")},function(e,t){e.exports=require("memorystream")},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("request-promise")},function(e,t){e.exports=require("pouchdb")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("mississippi")},function(e,t){e.exports=require("axios")},,function(e,t,n){"use strict";n.r(t);n(16);var i=n(1),o=n.n(i),r=n(0),a=(n(8),n(13)),s=n.n(a);n(23);function l(e){return document.querySelector(e)}function c(e){return document.querySelectorAll(e)}function d(e,t){let n=document.createElement(e);return t&&n.classList.add(t),n}function p(e,t){let n=document.createElement("span");return n.textContent=e,t&&n.classList.add(t),n}function u(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.lastChild)}function f(e){e&&e.parentElement.removeChild(e)}const g={oxia:"́",varia_:"`",varia:"̀",peris:"͂","":"",psili:"̓",dasia:"̔","":""},m=[g.oxia,g.varia,g.peris];const h={"α":{utf:"U+03B1",wkt:"a",gem:1},"β":{utf:"U+03B2",wkt:"b",gem:2},"γ":{utf:"U+03B3",wkt:"g",gem:3},"δ":{utf:"U+03B4",wkt:"d",gem:4},"ε":{utf:"U+03B5",wkt:"e",gem:5},"ζ":{utf:"U+03B6",wkt:"z",gem:7},"η":{utf:"U+03B7",wkt:"ē",gem:8},"θ":{utf:"U+03B8",wkt:"th",gem:9},"ι":{utf:"U+03B9",wkt:"i",gem:10},"κ":{utf:"U+03BA",wkt:"k",gem:20},"λ":{utf:"U+03BB",wkt:"l",gem:30},"μ":{utf:"U+03BC",wkt:"m",gem:40},"ν":{utf:"U+03BD",wkt:"n",gem:50},"ξ":{utf:"U+03BE",wkt:"ks",gem:60},"ο":{utf:"U+03BF",wkt:"o",gem:70},"π":{utf:"U+03C0",wkt:"p",gem:80},"ρ":{utf:"U+03C1",wkt:"r",gem:100},"ς":{utf:"U+03C2",wkt:"s",gem:100},"σ":{utf:"U+03C3",wkt:"s",gem:200},"τ":{utf:"U+03C4",wkt:"t",gem:300},"υ":{utf:"U+03C5",wkt:"u",gem:400},"φ":{utf:"U+03C6",wkt:"ph",gem:500},"χ":{utf:"U+03C7",wkt:"kh",gem:600},"ψ":{utf:"U+03C8",wkt:"ps",gem:700},"ω":{utf:"U+03C9",wkt:"ō",gem:800},"Α":{utf:"U+0391",wkt:"a",gem:""},"Β":{utf:"U+0392",wkt:"b",gem:""},"Γ":{utf:"U+0393",wkt:"g",gem:""},"Δ":{utf:"U+0394",wkt:"d",gem:""},"Ε":{utf:"U+0395",wkt:"e",gem:""},"Ζ":{utf:"U+0396",wkt:"z",gem:""},"Η":{utf:"U+0397",wkt:"ē",gem:""},"Θ":{utf:"U+0398",wkt:"th",gem:""},"Ι":{utf:"U+0399",wkt:"i",gem:""},"Κ":{utf:"U+039A",wkt:"k",gem:""},"Λ":{utf:"U+039B",wkt:"l",gem:""},"Μ":{utf:"U+039C",wkt:"m",gem:""},"Ν":{utf:"U+039D",wkt:"n",gem:""},"Ξ":{utf:"U+039E",wkt:"rs",gem:""},"Ο":{utf:"U+039F",wkt:"o",gem:""},"Π":{utf:"U+03A0",wkt:"p",gem:""},"Ρ":{utf:"U+03A1",wkt:"r",gem:""},S:{utf:"U+XXXX",wkt:"s",gem:""},"Σ":{utf:"U+03A3",wkt:"s",gem:""},"Τ":{utf:"U+03A4",wkt:"t",gem:""},"Υ":{utf:"U+03A5",wkt:"u",gem:""},"Φ":{utf:"U+03A6",wkt:"ph",gem:""},"Χ":{utf:"U+03A7",wkt:"kh",gem:""},"Ψ":{utf:"U+03A8",wkt:"ps",gem:""},"Ω":{utf:"U+03A9",wkt:"ō",gem:""},"ͅ":{utf:"U+0345",wkt:"i",gem:10}};let b=n(24)({html:!0}),x=n(25);b.use(x);console.log;const v=n(6),y=n(5);var k=n(2),w=n(5),C=n.n(w),L=n(9),E=n(3);const{app:j}=n(0).remote,_=n(0).remote.require("electron-settings");let S=n(26);const O=console.log,U=(n(6),n(7),j.getPath("userData")),A=(j.getAppPath(),k.config.code,n(27),n(28));let N=n(29),q=l("#progress"),z=[];const R={uri:[k.config.host,"_all_dbs"].join("/"),json:!0};function B(e){let t=o.a.filter(e,e=>e.active).map(e=>e.dname);Object(E.checkConnection)(U,t)}function J(){return A(R).then((function(e){return e=o.a.filter(e,e=>"_"!=e[0]),function(e){return Promise.all(e.map((function(e){let t=[k.config.host,e].join("/"),n=new N(t,{skip_setup:!0});return Promise.all([n.info().then(t=>(t.dname=e,t)).catch(e=>{"missing"!=e.reason&&O("catch info ERR",e)}),n.get("description").then(e=>e).catch(e=>{"missing"!=e.reason&&O("catch descr ERR",e)})])}))).then(t=>{let n=[];return e.forEach((e,i)=>{let o=t[i];if(!o)return;let r=o[0],a=o[1];if(!r||!a)return;let s={dname:e.split("-")[1],name:a.name,size:r.doc_count,langs:a.langs,source:a.source};n.push(s)}),n})}(e=o.a.filter(e,e=>e.split("-")[0]==k.config.code)).then(e=>e)})).catch((function(e){return O("ERR-request"),[]}))}function D(e){e=o.a.filter(e,e=>"flex"!=e.dname),function(){let e=l("#dicts-remote");e&&u(e);let t=d("table","dicts-table");t.id="table-dicts-remote";let n=d("tr","table-header");n.id="table-header-remote",t.appendChild(n);let i=d("td");i.textContent="dict's name",n.appendChild(i);let o=d("td");o.textContent="docs",n.appendChild(o);let r=d("td");r.textContent="langs",n.appendChild(r);let a=d("td");a.textContent="sync:",n.appendChild(a);let s=d("td");s.textContent="activate:",n.appendChild(s),e.appendChild(t)}();let t=l("#table-dicts-remote");e.forEach(e=>{let n=d("tr");n.dataset.dname=e.dname,t.appendChild(n);let i=d("td","dname");n.appendChild(i),i.textContent=e.name,i.dataset.dname=e.dname;let o=d("td","dsize");o.textContent=e.size,n.appendChild(o);let r=d("td","dlang");r.textContent=e.langs,n.appendChild(r);let a=d("td","");if(e.sync){let e=T();a.appendChild(e)}else{let t="---";e.dname!=k.config.ldname&&(a.dataset.sync=e.dname,t="clone",a.classList.add("link")),a.textContent=t}n.appendChild(a);let s=d("td","link");if(e.active){let t=T();t.dataset.disable=e.dname,s.appendChild(t)}else{s.dataset.activate=e.dname;let t=e.sync||e.dname==k.config.ldname?"activate":"";s.textContent=t}n.appendChild(s)})}function T(){let e=d("img","dict-check");return e.setAttribute("src","../resources/check.png"),e}function F(e,t){let n=_.get("cfg");n=JSON.parse(JSON.stringify(n));let i=o.a.find(n,t=>t.dname==e);i&&(i.active=!!t,_.set("cfg",n),B(n),D(n))}function M(e,t){let n=o.a.find(e,e=>e.dname==t);if(!n)return Promise.resolve([]);let i,r=new S;i=l("remote-dicts"==_.get("state").sec?"#remote-progress-counter":"#init-progress-counter");let a=d("div","counter");i.appendChild(a);let s=0,c=k.config.batch_size/2;return r.on("data",(function(e){s+=c;let t=Math.round(100*parseFloat(1-(n.size-s)/n.size).toFixed(2));a.innerHTML="cloning <b>"+n.name+"</b> dictionary: "+t+"%",t>100&&(a.textContent="")})).on("error",(function(e){O("____stream error",e)})).on("change",(function(e){O("____stream change",t,e)})).on("paused",(function(e){O("____stream paused",t,e)})).on("active",(function(e){O("____stream active",t,e)})),Object(E.streamDB)(U,t,r,k.config.batch_size).then((function(){return t})).catch((function(e){console.log("oh no an error",e.message)}))}function P(){let e=_.get("state");(!e||e&&"main"!=e.sec)&&(e={sec:k.config.defstate},_.set("state",e)),Oe(e),e=JSON.parse(JSON.stringify(e));let t=_.get("lang");t||(t=k.config.deflang,_.set("lang",t));let n=_.get("cfg");if(n)B(n=JSON.parse(JSON.stringify(n)));else{q.classList.remove("is-hidden");l("#default-dicts").classList.remove("is-hidden");J().then(e=>{Object(E.ensureDBdir)(U),e=JSON.parse(JSON.stringify(e)),Promise.all([M(e,"terms").then(e=>"terms"),M(e,"flex").then(e=>"flex"),M(e,"wkt").then(e=>"wkt")]).then(t=>{let n=function(e,t){return e.forEach((e,n)=>{t.includes(e.dname)?(e.active=!0,e.sync=!0,e.idx=n):e.idx=100+n}),(e=o.a.sortBy(e,"idx")).forEach((e,t)=>{e.idx=t}),e}(e,t);_.set("cfg",n);l("#default-dicts").classList.add("is-hidden");q.classList.add("is-hidden")}).catch(e=>{O("ERR-initReplication",e.message)})})}return e}document.addEventListener("click",e=>{let t=e.target,n=t.dataset;if(n)if(n.dname)!function(e,t){let n=_.get("cfg");n=JSON.parse(JSON.stringify(n));let i=o.a.find(n,t=>t.dname==e);if(i){if(t){if(i.idx>=n.length-1)return;n[i.idx+1].idx=i.idx,i.idx=i.idx+1}else{if(i.idx<1)return;n[i.idx-1].idx=i.idx,i.idx=i.idx-1}n=o.a.sortBy(n,"idx"),_.set("cfg",n),D(n)}}(n.dname,e.ctrlKey);else if(n.activate){if("activate"!=t.textContent)return;F(n.activate,!0)}else if(n.disable)F(n.disable,!1);else if(n.sync){if("clone"!=t.textContent)return;let e=n.sync;if(z.includes(e))return;z.push(e);let i=_.get("cfg");M(i=JSON.parse(JSON.stringify(i)),n.sync).then(e=>{let t=o.a.find(i,t=>t.dname==e);t&&(t.active=!0,t.sync=!0,_.set("cfg",i),D(i))})}else if(n.cleanup){let e;_.set("cfg",e),r.remote.getCurrentWebContents().reload(),Object(E.emptyDBdir)(U),P()}});var H=n(4);let I=n(1),Z=(n(30)("csv"),console.log),G=(n(6),n(5),n(31));function K(e,t,n,i){let o={};!function(e,t){t.forEach(t=>{t.forEach(t=>{if(!t.lang)return;t.text.split(" ").forEach(t=>{t=(t=Object(H.oxia)(Object(H.comb)(t))).toLowerCase(),e[t]?e[t].freq+=1:e[t]={wf:t,freq:1}})})})}(o,n),function(e,t,n,i){Object(E.readDictionary)(e,t).then(e=>{let t=I.flatten(I.compact(e.map(e=>e.docs)));G.pipe(function(e){let t=0;return G.from.obj((function(n,i){if(t==e.length)return i(null,null);let o=e[t];t++,i(null,o)}))}(n),G.parallel(5,W),function(e,t,n){let i={};return G.through.obj((function(e,t,n){e.forEach(e=>{let t={rdict:e.rdict,dict:Object(H.comb)(e.rdict),plain:e.plain};e.verb&&(t.verb=!0),e.name&&(t.name=!0),t.verb&&e.aug&&(t.aug=e.aug),e.key?t.key=e.key.split("-")[0]:e.keys&&(t.key=e.keys.split("-")[0]);let n=[e.dict,e.name,e.verb].join("-");i[n]||(i[n]=t)}),n()}),(function(e){let o=I.values(i);o.forEach(e=>{let n=I.find(t,t=>e.rdict==t.rdict);n&&(e.trns=n.trns)}),n(o),e(null,null)}))}(0,t,(function(e){i(e)})))}).catch(e=>{Z("_______ANTRAX-ERR",e)})}(e,t,I.values(o),(function(e){i(e)}))}function W(e,t){let n=e.wf;if(!n)return t(null,null);Object(L.antrax)(n).then(e=>{let n=I.flattenDeep(e.chains.map(e=>e.map(e=>e.dicts)));n=I.filter(n,e=>e.name||e.verb),n=I.filter(n,e=>!e.possible);let i=I.flatten(e.terms);n.push(...i),n.forEach(e=>{delete e.reg,delete e.trns,delete e.dname,delete e.keys,delete e.fls,delete e.weight});let o={},r=[];n.forEach(e=>{let t=[e.plain,e.key,e.name,e.verb].join("-");o[t]||(r.push(e),o[t]=!0)}),t(null,r)}).catch((function(e){console.log("CSV-ANTRAX-ERR",e)}))}const{app:X}=n(0).remote,{dialog:$,getCurrentWindow:V}=n(0).remote,Y=n(6),Q=n(0).remote.require("electron-settings"),ee=n(7);let te=l("#progress"),ne=X.getPath("userData");console.log;function ie(e,t){let n=l("#table-local-chunk");n&&f(n),(n=d("table","dicts-table")).id="table-local-chunk",n.dataset.dicts=JSON.stringify(e);let i=d("tr","table-chunk-header");n.appendChild(i);let o=d("td");o.textContent="wordform",i.appendChild(o);let r=d("td");if(r.textContent="pos",i.appendChild(r),t){let e=d("td");e.textContent="key",i.appendChild(e)}let a=d("td");return a.textContent="translation",i.appendChild(a),e.forEach(e=>{let i=d("tr","table-line");n.appendChild(i);let o=d("td");o.textContent=e.rdict,i.appendChild(o);let r=d("td");if(r.textContent=e.verb?"verb":e.name?"name":"-",i.appendChild(r),t){let t=d("td");t.textContent=e.key,i.appendChild(t)}let a=d("td");a.textContent=e.trns,i.appendChild(a)}),n}function oe(e,t){let n=l("#table-local-chunk");if(!n)return;let i=JSON.parse(n.dataset.dicts);if(!i.length)return;let r=o.a.find(i,e=>e.rdict==t),a=l(e.sid),s=function(e){let t=l("#dict-item-container"),n=l("#choose-item-pos"),i=l("#item-dict");if(e){n.classList.add("is-hidden"),i.classList.remove("is-hidden");l("#dict-item-header");l("#dict-item-rdict").textContent=e.rdict;let t=l("#dict-item-pos"),o=e.verb?"verb":e.name?"name":e.pos;t.textContent=o;let r=l("#dict-item-input-text");r.value="",e.trns&&(r.value=e.trns.join("; "))}else n.classList.remove("is-hidden"),i.classList.add("is-hidden");return t}(r);a.appendChild(s),l("#dict-item-input-text").focus(),function(e,t,n){let i=Q.get("state");if(!t){t={new:!0},l("#new-item-input-wf").focus()}let o=l("#dict-item-submit-ok");o&&f(o);(o=d("input","submit")).setAttribute("type","submit"),o.setAttribute("value","ok"),o.id="dict-item-submit-ok",n.appendChild(o);let r=l("#dict-item-submit-cancel");r&&f(r);(r=d("input","submit")).setAttribute("type","submit"),r.setAttribute("value","cancel"),r.id="dict-item-submit-cancel",n.appendChild(r);let a=l("#dict-item-input-text");a.onkeydown=function(e){"Escape"==e.key&&a.blur()};let s=l("#new-item-input-wf");s.onkeydown=function(e){"Escape"==e.key&&s.blur()};let c=l("#new-item-input-trns");c.onkeydown=function(e){"Escape"==e.key&&c.blur()},o.addEventListener("click",n=>{if(t.new){t.rdict=s.value.trim(),t.dict=Object(H.comb)(t.rdict);let n=l('[name = "dictpos"]:checked').value;"verb"==n?t.verb=!0:"name"==n&&(t.name=!0),n?t.plain=Object(H.plain)(t.rdict):(t.term=t.dict,t.pos="indecl"),t.trns=c.value.split(";"),e.push(t)}else t.verb||t.name||(t.term=Object(H.comb)(t.rdict)),t.trns=a.value.split(";");i.sec="local-chunk",Oe(i,e)}),r.addEventListener("click",t=>{i.sec="local-chunk",Oe(i,e)})}(i,r,s)}document.addEventListener("click",e=>{let t=e.target;if(!t||"deldict-submit"!=t.id)return;te.classList.remove("is-hidden");let n=k.config.ldname;Object(E.delDictionary)(ne,n).then(e=>{if(!e)return;let t=Q.get("state"),n=Q.get("cfg");B(n=o.a.filter(n,e=>e.dname!=k.config.ldname)),Q.set("cfg",n),te.classList.add("is-hidden"),t.sec="main",Oe(t)})}),document.addEventListener("click",e=>{let t=e.target.dataset;if(!t)return;let n=k.config.ldname,i=Q.get("state");if(t.localdictfull)Object(E.readDictionary)(ne,n).then(e=>{let t=o.a.flatten(e.map(e=>e.docs));i.sec="local-dict-full",Oe(i,t)});else if(t.createlocalchunk){if(!i.pars)return;K(ne,n,i.pars,e=>{i.sec="local-chunk",Oe(i,e)})}else if(t.deletelocaldict){let e=k.config.ldname;Object(E.delDictionary)(ne,e).then(e=>{if(!e)return;let t=Q.get("state"),n=Q.get("cfg");B(n=o.a.filter(n,e=>e.dname!=k.config.ldname)),Q.set("cfg",n),te.classList.add("is-hidden"),t.sec="main",Oe(t)})}else if(t.exportlocaldict){let e={title:"save local dict"};$.showSaveDialog(null,e,e=>{let t=C.a.extname(e);t||(e=[e,t=".json"].join("")),[".json",".csv"].includes(t)&&Object(E.readDictionary)(ne,n).then(n=>{let i,r=o.a.flatten(n.map(e=>e.docs)).map(e=>{if(!e.trns)return;let t=e.verb?"verb":e.name?"name":"-";return{dict:e.rdict,pos:t,key:e.key,trns:e.trns.join(";")}});if(r=o.a.compact(r),".json"==t)i=JSON.stringify(r,null,2);else if(".csv"==t){let e=r.map(e=>o.a.values(e).map(e=>JSON.stringify(e)));i=(e=e.map(e=>e.join(", "))).join("\n")}Y.writeFile(e,i).then(()=>{console.log("file save success!",e)}).catch(e=>{console.error(e)})})})}}),ee.bind(["ctrl+d"],(function(e){let t=Q.get("state");if(!t.pars)return;let n=k.config.ldname;K(ne,n,t.pars,e=>{t.sec="local-chunk",Oe(t,e)})})),ee.bind(["ctrl+shift+d"],(function(e){te.classList.remove("is-hidden");let t=Q.get("state"),n=k.config.ldname;Object(E.readDictionary)(ne,n).then(e=>{let n=o.a.flatten(e.map(e=>e.docs));t.sec="local-dict-full",Oe(t,n)})}));var re=n(14),ae=n.n(re);let se=o.a.values(m),le=g.dasia;console.log;function ce(e,t,n){let i,r=Object(H.comb)(e).split("");return i="gem"==t?function(e,t){let n=[];return e.forEach(e=>{h[e]&&n.push(h[e].gem)}),o.a.sum(n)}(r):"beta"==t?function(e){let t=[];return e.forEach(e=>{h[e]&&t.push("B")}),t.join("")}(r):function(e){let t=[];return e.forEach(e=>{h[e]?t.push(h[e].wkt):e==le?t.unshift("h"):se.includes(e)&&t.push(g.oxia)}),t.join("")}(r)}const de=n(0).remote.require("electron-settings");console.log;let pe=l("#progress");function ue(e){if(!e||!e.length)return;let t=l("#source"),n=l("#result");if(!t||!n)return;u(t),u(n),fe(),e.forEach(e=>{let n=function(e,t){let n=document.createElement("p");return n.textContent=e,t&&n.classList.add(t),n}();n.classList.add("par"),e.forEach(e=>{e.punct&&(e.text+=" ");let t=p(e.text);e.lang?t.classList.add("active-form"):e.punct?t.classList.add("punct"):t.classList.add("space"),n.appendChild(t)}),t.appendChild(n)});let i=c("span.active-form");if(1==i.length){let e=i[0];e&&me(e)}}function fe(){var e;e=".popup",document.querySelectorAll(e).forEach(e=>{e.parentElement.removeChild(e)})}function ge(e,t){let n=d("div","popup");document.body.appendChild(n),n.classList.remove("is-hidden");let i=function(e){return e.getBoundingClientRect()}(e),o={top:i.top+24,left:i.left};t&&(o={top:i.top-32,left:i.left}),function(e,t){let n=[e.top,"px"].join(""),i=[e.left,"px"].join("");t.style.top=n,t.style.left=i}(o,n);let r=d("ul","compound-list");return n.appendChild(r),n}function me(e,t){pe.classList.remove("is-hidden");let n=e.textContent.trim();(function(e,t){return Object(L.antrax)(e,t)})(n=function(e){let t=e.split(""),n=!1,i=[];return t.forEach(e=>{m.includes(e)?n||(i.push(e),n=!0):i.push(e)}),i.join("")}(Object(H.comb)(n)),t).then(n=>(pe.classList.add("is-hidden"),n&&(n.chains.length||n.terms.length)?void(t?function(e,t){if(!t.chains||!t.chains.length)return;if(1==t.chains.length&&1==t.chains[0].length)return;let n=ge(e).querySelector(".compound-list");t.chains.forEach((e,i)=>{let o=d("li","comp-line");n.appendChild(o),e.forEach((n,r)=>{let a,s=!1;r==e.length-1&&(s=!0),a=p(n.seg,""),s||n.flexes||a.classList.add("comp-segment"),n.connector?a.classList.add("comp-connector"):n.dicts&&a.classList.add("active-dict"),a.dataset.segdicts=JSON.stringify(t.chains[i][r].dicts),a.dataset.cogns=JSON.stringify(t.chains[i][r].cogns),o.appendChild(a)})})}(e,n):function(e,t){let n=o.a.filter(t.chains,e=>1==e.length).map(e=>e[0]),i=o.a.flatten(n.map(e=>e.dicts)),r=o.a.flatten(n.map(e=>e.cogns));e.dataset.cogns=JSON.stringify(r),(i=o.a.uniq(i.map(e=>JSON.stringify(e))).map(e=>JSON.parse(e))).push(...t.terms),be(e,i)}(e,n)):he())).catch((function(e){console.log("ANTRAX-ERR",n,e)}))}function he(){l("#result").textContent="no result. Try Click, or Ctrl-click. Or create your own Local dictionary"}function be(e,t){let n=e.textContent,i=l("#result");u(i);let r=function(e){let t=d("div","dict-query");return t.textContent=e,t}(n);i.appendChild(r);let a=de.get("cfg");(t=o.a.sortBy(t,(function(e){let t=o.a.find(a,t=>t.dname==e.dname);return t?t.idx:100}))).forEach(e=>{let t=function(e){let t=d("div","dict-container"),n=function(e){let t=d("div","dict-header"),n=p(e.dname,"dict-dname");"souda"==e.dname&&n.setAttribute("href",e.href);t.appendChild(n);let i=p(e.rdict,"dict-rdict");if(t.appendChild(i),e.verb){let e=p("verb","dict-pos");t.appendChild(e)}if(e.name){let e=p("name","dict-pos");t.appendChild(e)}else if(e.term&&e.pos){let n=p(e.pos,"dict-pos");t.appendChild(n)}else if(e.suf){let e=p("suff","dict-pos");t.appendChild(e)}else if(e.pref){let e=p("pref","dict-pos");t.appendChild(e)}if(e.gends){let n=p(e.gends.toString(),"dict-gends");t.appendChild(n)}return t}(e);t.appendChild(n);let i=function(e){let t,n=e.fls,i=o.a.filter(n,e=>e.degree);if(!(n=o.a.filter(n,e=>!e.degree)))return;if(e.verb){let e=o.a.filter(n,e=>e.numper),i=o.a.filter(n,e=>e.numcase),r=o.a.filter(n,e=>!e.numcase&&!e.numper);if(t=e.map(e=>[e.tense,e.numper].join(" ")),i.length){let e=i.map(e=>[e.tense,[e.gend,e.numcase].join(".")].join(", "));t.push(...e)}if(r.length){let e=r.map(e=>e.tense);t.push(...e)}}else t="adv"==e.pos?n.map(e=>e.degree):e.gends?n.map(t=>[e.gends.toString(),t.numcase].join(".")):e.name?n.map(e=>[e.gend,e.numcase].join(".")):"pron"==e.pos?n.map(e=>[e.gend||"-",e.numcase].join(".")):n.map(e=>[e.gend,e.numcase].join("."));if(i.length){let e=i.map(e=>e.degree);t.push(...e)}let r=o.a.filter(t,e=>!/du/.test(e));r.length&&(t=r);let a=o.a.filter(t,e=>!/voc/.test(e));a.length&&(t=a);return t.sort()}(e);if(i){let e=function(e){let t=d("ul","dict-fls");return e.forEach(e=>{let n=d("li");n.textContent=e,t.appendChild(n)}),t}(i);t.appendChild(e)}if(e.trns){let n=function(e){let t=d("ul","dict-trns");e.trns||(e.trns=["no transtation for this dict article"]);return e.trns.forEach(e=>{let n=d("li","dict-trns-li"),i=e.split(/, [A-Z]| [A-Z][^ ]*[0-9]/)[0],o=p(i,"dict-trns-li-shown");n.appendChild(o);let r=e.replace(i,"").split("(").join('<span class="grey">').split(")").join("</span>");if(r){let e=p("","is-hidden");e.innerHTML=r,e.classList.add("dict-trns-li-hidden"),n.appendChild(e),o.classList.add("ellipsis")}t.appendChild(n)}),t}(e);t.appendChild(n)}return t}(e);i.appendChild(t)})}n(11);const xe=console.log,ve=n(0).remote.require("electron-settings"),ye=n(7),{getCurrentWindow:ke}=n(0).remote,we=r.remote.app;we.getPath("userData"),we.getAppPath();let Ce,Le=[],Ee=0,je=l("#progress");function _e(){Ee<=0||(Ee--,Oe())}function Se(){Ee>=Le.length-1||(Ee++,Oe())}function Oe(e,t){if(e){let t=o.a.clone(e);Le.push(t),Ee=Le.length-1}else e=Le[Ee];let n=e.sec,i=function(e){let t=ve.get("lang")||"eng";const n=c(".section");let i,o;return Array.prototype.forEach.call(n,e=>{e.classList.add("is-hidden")}),(i=l(o=["#",e.sec,"_",t].join("")))||(i=l(o=["#",e.sec,"_",k.config.deflang].join(""))),i||xe("____________ NO SEC ID !!!!",o),i.classList.remove("is-hidden"),o}(e);e.sid=i,"main"==n?(function(e){if(Ce)return;let t=ve.get("split-sizes")||k.config.splitSizes;Ce=ae()(["#source","#result"],{sizes:t,gutterSize:5,cursor:"col-resize",minSize:[0,0],onDragEnd:function(e){ve.set("split-sizes",e),ke().reload()}}),e.mono&&Ce.collapse(e.mono)}(e),ue(e.pars)):"remote-dicts"==n?J().then(e=>{let t=_.get("cfg");if((t=JSON.parse(JSON.stringify(t)))||(t=e),t.length!=e.length){let n=o.a.filter(e,e=>!t.map(e=>e.dname).includes(e.dname));n.forEach((e,t)=>{e.idx=100+t}),t.push(...n),(t=o.a.sortBy(t,"idx")).forEach((e,t)=>{e.idx=t}),_.set("cfg",t)}D(t)}):"local-chunk"==n?function(e,t){if(!t)return;let n=l(e.sid),i=l("#new-dict-item-link"),r=ie(t);n.insertBefore(r,i);let a=o.a.filter(t,e=>e.trns);if(!a.length)return;let s=l("#dict-table-submit-ok");s&&f(s),(s=d("input","submit")).setAttribute("type","submit"),s.setAttribute("value","merge filled to current local dict"),s.id="dict-table-submit-ok",n.appendChild(s);let c=a.map(e=>({_id:e.plain||e.term,docs:[e]}));s.addEventListener("click",t=>{Object(E.updateCurrent)(ne,"local",c).then(t=>{let n=Q.get("cfg");n=JSON.parse(JSON.stringify(n));let i=o.a.find(n,e=>e.dname==k.config.ldname);i||(i={active:!0,dname:"local",name:"Local",idx:0,langs:"grc,any"},n.unshift(i),n.forEach((e,t)=>{e.idx=t}),B(n)),i.size=t.size,Q.set("cfg",n),e.sec="main",Oe(e)}).catch(e=>{console.log("ERR: update local dict",e)})})}(e,t):"local-dict-full"==n?function(e,t){if(!t)return;let n=l(e.sid),i=l("#full-local-dict-banner"),o=ie(t,!0);n.insertBefore(o,i)}(e,t):"local-dict-item"==n&&oe(e,t),je.classList.add("is-hidden"),ve.set("state",e)}r.ipcRenderer.on("action",(function(e,t){"goleft"==t?_e():"goright"==t&&Se()})),ye.bind(["ctrl+1","ctrl+2"],(function(e){})),ye.bind(["esc"],(function(e){fe()})),ye.bind(["alt+left","alt+right"],(function(e){37==e.which?_e():39==e.which&&Se()})),ye.bind(["ctrl+p"],(function(e){let t=l("span.active-form:hover")||l("span.active-dict:hover");if(!t)return;let n=["http://www.perseus.tufts.edu/hopper/morph?l=",t.textContent,"&la=greek#lexicon"].join("");r.shell.openExternal(n)})),ye.bind(["ctrl+f"],(function(e){console.log("_________+F: future diglossa.js connection");let t=ve.get("cfg");t&&(t=JSON.parse(JSON.stringify(t)),console.log("_________+F: cfg:",t))})),ye.bind(["ctrl+g"],(function(e){let t=ve.get("cfg");t&&(t=JSON.parse(JSON.stringify(t)),(t=o.a.filter(t,e=>"souda"!=e.dname)).forEach((e,t)=>{e.idx=t}),console.log("_________+G: cfg:",t),ve.set("cfg",t))})),ye.bind(["ctrl+r"],(function(e){let t=Le[Ee];Le=[t],Ee=0})),ye.bind(["ctrl+shift+z"],(function(e){let t={sec:k.config.defstate};ve.set("state",t),ve.set("cfg",void 0),console.log("== ZERO STATE CFG == ",void 0)})),ye.bind(["space"],(function(e){!function(){let e=c(".dict-trns");if(!e.length)return;let t=c(".dict-fls"),n=e[0];n&&(n.classList.contains("is-hidden")?(e.forEach(e=>{e.classList.remove("is-hidden")}),t.forEach(e=>{e.classList.remove("is-hidden")})):(e.forEach(e=>{e.classList.add("is-hidden")}),t.forEach(e=>{e.classList.add("is-hidden")})))}()})),ye.bind(["tab"],(function(e){!function(){let e=c(".dict-trns");if(!e.length)return;let t=c(".dict-fls"),n=(l("ul.dict-trns:not(.is-hidden)"),0);e.forEach((e,i)=>{e.classList.contains("is-hidden")||(n=i+1),e.classList.add("is-hidden"),t[i]&&t[i].classList.add("is-hidden")}),n==e.length&&(n=0),e[n].classList.remove("is-hidden"),t[n]&&t[n].classList.remove("is-hidden")}()})),ye.bind(["ctrl+="],(function(e){let t=r.webFrame.getZoomFactor()+.1;r.webFrame.setZoomFactor(t)})),ye.bind(["ctrl+-"],(function(e){let t=r.webFrame.getZoomFactor()-.1;r.webFrame.setZoomFactor(t)})),ye.bind(["ctrl+0"],(function(e){r.webFrame.setZoomFactor(1)}));const Ue=n(0).remote.require("electron-settings"),Ae=r.remote.Menu,Ne=r.remote.MenuItem,qe=(console.log,r.remote.app);let ze,Re=l("#progress"),Be=qe.getPath("userData");const Je=new Ne({label:"Perseus Greek Word Study Tool",click:e=>{if(!ze)return;let t=["http://www.perseus.tufts.edu/hopper/morph?l=",ze.textContent,"&la=greek#lexicon"].join("");r.shell.openExternal(t)}}),De=new Ne({label:"Wiktionary (esp. for particles)",click:()=>{if(!ze)return;let e=["https://en.wiktionary.org/wiki/",ze.textContent,"#Ancient_Greek"].join("");r.shell.openExternal(e)}}),Te=new Ne({label:"Souda dictionary",click:()=>{if(!ze)return;ze.textContent;let e=c(".dict-dname"),t=o.a.find(e,e=>"souda"==e.textContent);if(!t)return;let n=["https://www.cs.uky.edu/~raphael/sol/sol-entries/",t.getAttribute("href")].join("");r.shell.openExternal(n)}}),Fe=new Ne({label:"create local dictionary for current text",click:()=>{Re.classList.remove("is-hidden");let e=Ue.get("state");if(!e.pars)return;let t=k.config.ldname;K(Be,t,e.pars,t=>{e.sec="local-chunk",Oe(e,t)})}}),Me=new Ne({label:"show full local dictionary",click:()=>{Re.classList.remove("is-hidden");let e=Ue.get("state"),t=k.config.ldname;Object(E.readDictionary)(Be,t).then(t=>{let n=o.a.flatten(t.map(e=>e.docs));e.sec="local-dict-full",Oe(e,n)})}}),Pe=new Ne({label:"back in history",click:()=>{_e()}}),He=new Ne({label:"forward in history",click:()=>{Se()}});const Ie=n(7),Ze=(console.log,r.remote.app),Ge=n(11),Ke=n(0).remote.require("electron-settings"),We=n(32);Ze.getPath("userData"),Ze.getAppPath();!function(e){let t=l("#container");e.langs.forEach(n=>{e.pages.forEach(e=>{let i,o,r;try{i=y.resolve(__dirname,"../src/sections",n,[e,"md"].join(".")),o=v.readFileSync(i).toString(),r=b.render(o)}catch(e){return}let a=d("div","section");a.id=[e,n].join("_"),a.setAttribute("lang",n),a.classList.add("is-hidden"),a.innerHTML=r,t.appendChild(a.cloneNode(!0))})})}(k.config),document.onmousedown=function(e){if(2!=e.button)return;const t=new Ae;t.append(Pe),t.append(He),t.append(new Ne({type:"separator"})),t.append(Fe),t.append(Me),t.append(new Ne({type:"separator"})),(ze=e.target).classList.contains("active-form")&&(t.append(Je),t.append(De),t.append(Te)),e.preventDefault(),t.popup(r.remote.getCurrentWindow())};let Xe=!1,$e=(l("#progress"),P());r.ipcRenderer.on("section",(function(e,t){let n=Ke.get("state");n.sec=t,Oe(n)})),r.ipcRenderer.on("lang",(function(e,t){Ke.set("lang",t),r.ipcRenderer.send("lang",t),Oe(Ke.get("state"))})),Ge.on("text-changed",()=>{let e=Ge.readText();if(Xe)return;let t=function(e){let t=e.trim();return t=(t=(t=(t=t.replace(/ᾰ/gi,"α").replace(/ᾱ/gi,"α").replace(/ῑ/gi,"ι").replace(/ῐ/gi,"ι").replace(/ῠ/gi,"υ").replace(/ῡ/gi,"υ")).replace(/̆/gi,"")).replace(/-/g,"")).replace(/\' /g,"᾽ ").replace(/\’ /g,"᾽ ")}(e),n=s()(t,k.config.code);n&&($e.sec="main",$e.pars=n,Ke.set("state",$e),Oe($e))}).startWatching(),document.addEventListener("click",e=>{let t=e.target,n=t.parentElement;if(t.classList.contains("external")){let n=t.getAttribute("href");n||(n=t.textContent),e.preventDefault(),r.shell.openExternal(n)}else if(t.classList.contains("dict-dname"))$e.sec="dict-edit",Oe($e);else if(n&&n.classList.contains("table-line")){let e=n.firstChild;if(!e)return;let t=e.textContent;if(!t)return;$e.sec="local-dict-item",Oe($e,t)}else if(t.classList.contains("active-form")||t.classList.contains("active-dict"))e.ctrlKey?function(e){if("undefined"==e.dataset.cogns||!e.dataset.cogns||!e.dataset.cogns.length)return;let t=JSON.parse(e.dataset.cogns);if(!t.length)return;let n=ge(e).querySelector(".compound-list");n.classList.add("cognate-list");let i=o.a.groupBy(t,"rdict");for(let e in i){let t=i[e],o=d("li","cognate-line");o.textContent=e,o.dataset.dicts=JSON.stringify(t),n.appendChild(o)}}(t):me(t,!0);else if(t.classList.contains("dict-query")){let e=t.nextSibling;e&&e.classList.contains("is-hidden")?e.classList.remove("is-hidden"):e&&e.classList.add("is-hidden")}else if(t.classList.contains("dict-header")||t.classList.contains("dict-rdict")||t.classList.contains("dict-pos")||t.classList.contains("dict-gends")){let e=t.closest(".dict-container"),n=e.querySelector(".dict-fls"),i=e.querySelector(".dict-trns");n&&n.classList.contains("is-hidden")?n.classList.remove("is-hidden"):n&&n.classList.add("is-hidden"),i.classList.contains("is-hidden")?i.classList.remove("is-hidden"):i.classList.add("is-hidden")}else if(t.classList.contains("dict-trns-li-shown")){let e=t.nextSibling;if(!e)return;e.classList.contains("is-hidden")?(e.classList.remove("is-hidden"),t.classList.remove("ellipsis")):(e.classList.add("is-hidden"),t.classList.add("ellipsis"))}else if(t.classList.contains("dict-trns-li-hidden")){let e=t.previousSibling;e&&(t.classList.add("is-hidden"),e.classList.add("ellipsis"))}}),document.addEventListener("click",e=>{let t=e.target;if("new-version"==t.id){l("#new-version").classList.add("is-hidden"),r.shell.openExternal(k.config.version)}let n=t.dataset;n&&n.section&&($e.sec=n.section,Oe($e))}),document.addEventListener("mouseover",(function(e){let t=e.target;if(t.textContent&&!e.ctrlKey)if(e.altKey){if(!t.classList.contains("active-form"))return;!function(e,t){fe();let n,i=ge(e,!0);t&&(n="gem");let o=ce(e.textContent,n);i.textContent=o}(t,e.shiftKey)}else t.classList.contains("active-form")?(t.classList.contains("active-form")&&fe(),me(t)):t.classList.contains("active-dict")?function(e){if(u(l("#result")),!e.dataset.segdicts)return;let t=JSON.parse(e.dataset.segdicts);t.length&&be(e,t)}(t):t.classList.contains("cognate-line")&&function(e){if(u(l("#result")),!e.dataset.dicts)return;let t=JSON.parse(e.dataset.dicts);t.length&&be(e,t)}(t)}),!1),r.ipcRenderer.on("version",(function(e,t){We.get(k.config.version).then((function(e){if(!e||!e.data)return;let n=e.data.name;if(t&&n&&n>t){let e=l("#new-version"),t=["new version available:",n].join(" ");e.textContent=t,e.classList.remove("is-hidden")}})).catch((function(e){console.log("API.GITHUB ERR")}))})),document.addEventListener("wheel",(function(e){!function(e){let t=e.target.closest("#source")||e.target.closest("#result")||e.target.closest(".section");if(!t)return;let n,i=t.id,o=l("#source"),r=l("#result");n=1==e.shiftKey||1==e.ctrlKey?"source"==i?r:o:t;if(!n)return;let a=e.deltaY>0?32:-32;n.scrollTop+=a}(e)}),!1),Ie.bind(["ctrl+shift+c"],(function(e){let t=l(".active-form:hover");if(!t)return;let n=t.textContent;n&&(Xe=!0,Ge.writeText(n),Xe=!1)})),Ie.bind(["ctrl+c"],(function(e){let t=l(".active-form:hover");if(!t)return;let n=t.textContent;n&&Ge.writeText(n)}))}]);
//# sourceMappingURL=app.js.map