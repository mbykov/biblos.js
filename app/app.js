!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=32)}([function(e,n){e.exports=require("electron")},function(e,n){e.exports=require("lodash")},function(e,n,t){"use strict";t.r(n),t.d(n,"config",(function(){return i}));const i={code:"grc",host:"http://diglossa.org:5984",pages:["home","main","remote-dicts","arrange-dicts","db-info","arrange-dicts","help","dict-edit","local-chunk","local-dict-full","local-dict-item","localdict-help","about","authentic","code","license","acknowledgements","arrange-dicts","contacts","csv"],defstate:"home",splitSizes:[50,50],langs:["eng","deu","rus"],ldname:"local",deflang:"eng"}},function(e,n){e.exports=require("antrax")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("orthos")},function(e,n){e.exports=require("fs-extra")},function(e){e.exports=JSON.parse('{"name":"development","description":"Add here any environment specific stuff you like."}')},,function(e,n){e.exports=require("mousetrap")},function(e,n){e.exports=require("electron-clipboard-extended")},,function(e,n){e.exports=require("speckled-band")},function(e,n){e.exports=require("split.js")},,function(e,n,t){var i=t(16);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(20)(i,o);i.locals&&(e.exports=i.locals)},function(e,n,t){n=e.exports=t(17)(!1);var i=t(18)(t(19));n.push([e.i,'/* @import "./treeview.min.css" */\n\n/* .is-shown { */\n/*     display: block!important; */\n/* } */\n\n.is-hidden {\n  display: none!important;\n}\n\n#main {\n    margin: 0;\n    padding: 10px;\n    height: 100%;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n#home {\n    padding-top: 25px;\n}\n\n#title {\n    margin: 0;\n    padding: 10px;\n    height: 100%;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n.section {\n    margin: 15px;\n    margin-left: 25px;\n    display: block;\n    overflow-y: hidden;\n    height: 100%;\n    padding-bottom: 120px;\n    margin-bottom: 120px;\n    font-family: "Helvetica Neue", Helvetica, Arial;\n    /* font-size: 1em; */\n    position: relative;\n}\n\n.split {\n    overflow-y: auto;\n    overflow-x: hidden;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.gutter {\n    background-color: #eee;\n    background-repeat: no-repeat;\n    background-position: 50%;\n    height: 100%;\n    width: 5px;\n}\n\n.gutter.gutter-horizontal {\n    background-image: url('+i+");\n    cursor: ew-resize;\n}\n\n.split, .gutter.gutter-horizontal {\n    height: 100%;\n    float: left;\n}\n\n#source {\n    font-family: \"Helvetica Neue\", Helvetica, Arial;\n    font-size: 1em;\n    padding-left: 15px;\n    padding-top: 25px;\n    padding-bottom: 25px;\n    overflow-y: hidden;\n    line-height: 1.5;\n    /* overflow-x: hidden; */\n}\n\n#result {\n    font-family: \"Helvetica Neue\", Helvetica, Arial;\n    font-size: 0.9em;\n    padding-left: 15px;\n    padding-top: 25px;\n    padding-bottom: 25px;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n.link {\n  cursor: pointer;\n  color: maroon;\n}\n\n.dinfo {\n    /* cursor: pointer; */\n    color: maroon;\n}\n\n.dname {\n    cursor: pointer;\n}\n\n.clause {\n    background-color: #eee;\n}\n\n\n/* span { */\n    /* padding-right: 5px; */\n/* } */\n\nspan.space {\n    padding-right: 0;\n}\n\nspan.tibphrase {\n    padding-right: 0;\n}\n\nspan.term {\n    padding-right: 0;\n}\n\nspan.tibphrase:hover {\n    /* background-color: #eee8aa; */\n}\n\nspan.tibwf:hover {\n  background-color: #eee8aa;\n}\n\n.grey {\n    color: grey;\n}\n\nli.hidden {\n  display: none;\n}\n\n.hidden {\n    display: none; /* !important */;\n}\n\n.activetrn {\n    display: block!important;\n}\n\ninput[type='file'] {\n    color: transparent;\n}\n\n.maroon {\n    color: maroon;\n}\n\n/* span.clear { clear: left; display: block; } */\n\n#book {\n  padding-top: 0;\n  margin: 0;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: hidden;\n}\n\n#headers {\n  margin: 0;\n  height: 30px;\n}\n\n#headers > p {\n  margin: 0;\n  -webkit-margin-before: 0;\n}\n\n#trns > p.hidden {\n  display: none;\n}\n\n.hleft {\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  /* padding-left: 15px; */\n  padding-right: 15px;\n  color: maroon;\n}\n\n.hright {\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  padding-left: 15px;\n  padding-right: 15px;\n  color: maroon;\n}\n\n.header {\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  background: white;\n  padding: 5px;\n  padding-left: 15px;\n  padding-right: 15px;\n}\n\n/* #headers { */\n/*   height: 16px; */\n/*   padding-bottom: 10px; */\n/* } */\n\n#book > div.hright > ul  {\n  margin: 0;\n  padding: 0;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n}\n\n#book {\n  margin: 0;\n  padding: 0;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n}\n\n.bookTitle {\n  margin-top: 80px;\n  margin-left: 50px;\n}\n\n.author {\n  font-size: 18px;\n}\n\n.title {\n  color: maroon;\n  font-size: 24px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.check-name {\n  padding-left: 5px;\n}\n\nspan.query {\n    cursor: pointer;\n    color: maroon;\n    font-weight: bold;\n}\n\n.libauth {\n  padding-top: 25px;\n  cursor: pointer;\n}\n\n.lib-auth {\n  padding: 10px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial;\n  font-size: 16px;\n  color: maroon;\n}\n\n.lib-auth::after {\n  content: ':'\n}\n\n.lib-title {\n  padding: 10px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial;\n  font-size: 16px;\n}\n\n.book-content {\n  padding-left: 10px;\n  font-size: 18px;\n  color: maroon;\n}\n\n/* #book > div.hleft.header > div > div:nth-child(2) */\ndiv.hleft.header > div.tree {\n  /* display: none; */\n}\n\n.qlink {\n  padding-right: 15px;\n  color: maroon;\n  cursor: pointer;\n}\n\n.qtext {\n  padding-left: 15px;\n}\n\n/* #source > div:nth-child(2) > p:nth-child(4) */\n/* #source > div:nth-child(2) > div > p:nth-child(2) */\ndiv.qtext > p.hidden {\n  display: none;\n}\n\n.disclaimer {\n  font-size: 10px;\n  }\n\n.qtitle {\n  color: maroon;\n  font-size: 24px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.statline {\n    padding-left: 25px;\n}\n\n.statnic {\n    width: 150px;\n}\n\n.statnic::after {\n    content: ': ';\n}\n\n.green {\n    color: green;\n}\n\n.red {\n    color: red;\n}\n\n#transcript {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  /* background-color: white; */\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1100;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  font-size: 16px;\n  padding: 3px;\n  background-color: #e6ffcc;\n}\n\n#ambi {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  padding: 3px;\n  background-color: white;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.upper {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1001;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  padding: 3px;\n  background-color: white;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.danger {\n  background-color: #fff2e6;\n}\n\n#ambi > ul {\n  /* magrin: 0; */\n  /* padding-inline-start: 0; */\n  /* margin-block-start: 0; */\n  /* margin-block-end: 0; */\n  padding: 3px;\n}\n\n#ambi > ul > li > span {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.upper > ul > li > span {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\nspan.active-form {\n    cursor: pointer;\n}\n\nspan.active-form:hover {\n    background-color: #eee8aa;\n}\n\nspan.active-dict {\n    cursor: pointer;\n}\n\nspan.active-dict:hover {\n    background-color: #eee8aa;\n}\n\n.punct {\n    padding-right: 2px;\n}\n\n/* .dict-div { */\n/* } */\n\n.dict-query {\n    color: maroon;\n    background-color: #eee;\n    padding-left: 5px;\n    padding-top: 5px;\n    margin-top: 5px;\n    /* padding-right: 15px; */\n}\n\n.dict-header {\n    margin-top: 5px;\n    cursor: pointer;\n}\n\n.dict-div {\n}\n\n.dict-ul {\n  font-size: small;\n  /* padding-left: 15px; */\n}\n\n.dict-dname {\n  float: right;\n  color: green;\n}\n\n.dict-gends {\n    font-style: italic;\n    padding-left: 5px;\n}\n\n.dict-pos {\n    font-style: italic;\n    background-color: #99ff99;\n    margin-left: 5px;\n    margin-right: 5px;\n}\n\n.dict-rdict {\n    width: 50%;\n    padding: 5px;\n}\n\nul.dict-fls {\n    padding-left: 15px;\n    padding-top: 5px;\n    padding-bottom: 5px;\n    background-color: #A4F3F3;\n}\n\nul.dict-trns {\n    padding-top: 5px;\n    padding-left: 25px;\n    line-height: 1.3;\n    list-style: none;\n}\n\n.ellipsis::after {\n    content: '...'\n}\n\n.dict-article {\n    padding-top: 12px;\n}\n\n.dicts-table {\n  width: 100%;\n  margin-top: 25px;\n}\n\n\n#arrange-dicts {\n  margin-top: 50px;\n}\n\n.dictname {\n  cursor: pointer;\n  color: maroon;\n}\n\n.dict-check {\n  width: 20px;\n  height: 20px;\n}\n\n.active-dict {\n  width: 100px;\n}\n\n#pechatxt {\n  padding-left: 15px;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.dictcsv {\n  color: maroon;\n  cursor: pointer;\n}\n\n.table-header {\n  color: maroon;\n  font-weight: bold;\n}\n\nul.info-table {\n    line-height: 1.5em;\n    list-style: none;\n\n}\n\n.popup {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    color: black;\n    display: 'block';\n    padding: 3px;\n    position: absolute;\n    z-index: 1001;\n    box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n    height: auto;\n    top: 250px;\n    left: 300px;\n    background-color: white;\n    font-size: 1.0em;\n}\n\n.comp-segment {\n    /* color: 'red'; */\n}\n\n.comp-segment:after {\n    content: ' - ';\n}\n\n.sect-dicts-ul {\n    list-style: none;\n    padding: 5px;\n    background-color: #E9FED6;\n}\n\n.sect-dict-line {\n    cursor: pointer;\n}\n\n.cognate-list {\n    padding: 5px;\n    background-color: #E9FED6;\n}\n\nli.cognate-line {\n    padding-right: 5px;\n    padding-left: 5px;\n}\n\nli.cognate-line:hover {\n    /* background-color: #E9FED6; */\n    padding-right: 5px;\n    padding-left: 5px;\n    background-color: white;\n}\n\n.table-chunk-header {\n    color: maroon;\n    font-weight: bold;\n    margin-bottom: 15px;\n    paddicg-bottom: 15px;\n}\n\n.table-line {\n    cursor: pointer;\n}\n\n.table-line:hover {\n    background-color: #eee8aa;\n}\n\n.dict-item {\n    padding-right: 5px;\n}\n\n.dict-item-rdict {\n    color: maroon;\n    font-weight: bold;\n}\n\n#dict-item-pos {\n    color: green;\n}\n\n.dict-item-input-text {\n    width: 80%;\n}\n\n.submit {\n    margin-top: 25px;\n    margin-right: 5px;\n}\n\n.section-ul {\n    list-style-type: disc;\n    margin-left: 15px;\n}\n\nul.dict-fls {\n    list-style: none;\n    line-height: 1em;\n}\n\n.compound-list {\n    list-style: none;\n}\n\n.error-message {\n    color: red;\n    padding: 10px;\n}\n\n.section-descr {\n    font-size: 0.9em;\n}\n\n#dict-table-submit-ok {\n    margin-bottom: 100px;\n}\n\n#new-dict-item-link {\n    margin-top: 25px;\n}\n\n.local-item-pos {\n    margin-left: 15px;\n    margin-right: 5px;\n}\n\n.banner {\n    margin-top: 15px;\n}\n",""])},function(e,n,t){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=function(e,n){var t=e[1]||"",i=e[3];if(!i)return t;if(n&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[t].concat(r).concat([o]).join("\n")}var a;return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t})).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){"use strict";e.exports=function(e,n){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||n?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,n,t){e.exports=t.p+"aeed77a8b9081818ddf762cf8f7e2829.png"},function(e,n,t){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(e,n){return n?n.querySelector(e):document.querySelector(e)},l=function(e){var n={};return function(e,t){if("function"==typeof e)return e();if(void 0===n[e]){var i=s.call(this,e,t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}n[e]=i}return n[e]}}(),c=null,d=0,p=[],u=t(21);function f(e,n){for(var t=0;t<e.length;t++){var i=e[t],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],n))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],n));r[i.id]={id:i.id,refs:1,parts:s}}}}function g(e,n){for(var t=[],i={},o=0;o<e.length;o++){var r=e[o],a=n.base?r[0]+n.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):t.push(i[a]={id:a,parts:[s]})}return t}function m(e,n){var t=l(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=p[p.length-1];if("top"===e.insertAt)i?i.nextSibling?t.insertBefore(n,i.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),p.push(n);else if("bottom"===e.insertAt)t.appendChild(n);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,t);t.insertBefore(n,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var n=p.indexOf(e);n>=0&&p.splice(n,1)}function b(e){var n=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return t.nc}();i&&(e.attrs.nonce=i)}return x(n,e.attrs),m(e,n),n}function x(e,n){Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])}))}function v(e,n){var t,i,o,r;if(n.transform&&e.css){if(!(r="function"==typeof n.transform?n.transform(e.css):n.transform.default(e.css)))return function(){};e.css=r}if(n.singleton){var a=d++;t=c||(c=b(n)),i=y.bind(null,t,a,!1),o=y.bind(null,t,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var n=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",x(n,e.attrs),m(e,n),n}(n),i=L.bind(null,t,n),o=function(){h(t),t.href&&URL.revokeObjectURL(t.href)}):(t=b(n),i=C.bind(null,t),o=function(){h(t)});return i(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;i(e=n)}else o()}}e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(n=n||{}).attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=a()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var t=g(e,n);return f(t,n),function(e){for(var i=[],o=0;o<t.length;o++){var a=t[o];(s=r[a.id]).refs--,i.push(s)}e&&f(g(e,n),n);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var k,w=(k=[],function(e,n){return k[e]=n,k.filter(Boolean).join("\n")});function y(e,n,t,i){var o=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(n,o);else{var r=document.createTextNode(o),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(r,a[n]):e.appendChild(r)}}function C(e,n){var t=n.css,i=n.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function L(e,n,t){var i=t.css,o=t.sourceMap,r=void 0===n.convertToAbsoluteUrls&&o;(n.convertToAbsoluteUrls||r)&&(i=u(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,n){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,i=t+n.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,n){var o,r=n.trim().replace(/^"(.*)"$/,(function(e,n){return n})).replace(/^'(.*)'$/,(function(e,n){return n}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?t+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,n){e.exports=require("util")},function(e,n){e.exports=require("debug")},function(e,n){e.exports=require("mississippi")},function(e,n){e.exports=require("markdown")},function(e,n){e.exports=require("request")},function(e,n){e.exports=require("pouchdb")},function(e,n){e.exports=require("markdown-it")},function(e,n){e.exports=require("markdown-it-attrs")},function(e,n){e.exports=require("axios")},,function(e,n,t){"use strict";t.r(n);t(15);var i=t(1),o=t.n(i),r=t(0),a=(t(7),t(12)),s=t.n(a);t(22);function l(e){return document.querySelector(e)}function c(e){return document.querySelectorAll(e)}function d(e,n){let t=document.createElement(e);return n&&t.classList.add(n),t}function p(e,n){let t=document.createElement("span");return t.textContent=e,n&&t.classList.add(n),t}function u(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.lastChild)}function f(e){e&&e.parentElement.removeChild(e)}const g={oxia:"́",varia_:"`",varia:"̀",peris:"͂","":"",psili:"̓",dasia:"̔","":""},m=[g.oxia,g.varia,g.peris];const h={"α":{utf:"U+03B1",wkt:"a",gem:1},"β":{utf:"U+03B2",wkt:"b",gem:2},"γ":{utf:"U+03B3",wkt:"g",gem:3},"δ":{utf:"U+03B4",wkt:"d",gem:4},"ε":{utf:"U+03B5",wkt:"e",gem:5},"ζ":{utf:"U+03B6",wkt:"z",gem:7},"η":{utf:"U+03B7",wkt:"ē",gem:8},"θ":{utf:"U+03B8",wkt:"th",gem:9},"ι":{utf:"U+03B9",wkt:"i",gem:10},"κ":{utf:"U+03BA",wkt:"k",gem:20},"λ":{utf:"U+03BB",wkt:"l",gem:30},"μ":{utf:"U+03BC",wkt:"m",gem:40},"ν":{utf:"U+03BD",wkt:"n",gem:50},"ξ":{utf:"U+03BE",wkt:"ks",gem:60},"ο":{utf:"U+03BF",wkt:"o",gem:70},"π":{utf:"U+03C0",wkt:"p",gem:80},"ρ":{utf:"U+03C1",wkt:"r",gem:100},"ς":{utf:"U+03C2",wkt:"s",gem:100},"σ":{utf:"U+03C3",wkt:"s",gem:200},"τ":{utf:"U+03C4",wkt:"t",gem:300},"υ":{utf:"U+03C5",wkt:"u",gem:400},"φ":{utf:"U+03C6",wkt:"ph",gem:500},"χ":{utf:"U+03C7",wkt:"kh",gem:600},"ψ":{utf:"U+03C8",wkt:"ps",gem:700},"ω":{utf:"U+03C9",wkt:"ō",gem:800},"Α":{utf:"U+0391",wkt:"a",gem:""},"Β":{utf:"U+0392",wkt:"b",gem:""},"Γ":{utf:"U+0393",wkt:"g",gem:""},"Δ":{utf:"U+0394",wkt:"d",gem:""},"Ε":{utf:"U+0395",wkt:"e",gem:""},"Ζ":{utf:"U+0396",wkt:"z",gem:""},"Η":{utf:"U+0397",wkt:"ē",gem:""},"Θ":{utf:"U+0398",wkt:"th",gem:""},"Ι":{utf:"U+0399",wkt:"i",gem:""},"Κ":{utf:"U+039A",wkt:"k",gem:""},"Λ":{utf:"U+039B",wkt:"l",gem:""},"Μ":{utf:"U+039C",wkt:"m",gem:""},"Ν":{utf:"U+039D",wkt:"n",gem:""},"Ξ":{utf:"U+039E",wkt:"rs",gem:""},"Ο":{utf:"U+039F",wkt:"o",gem:""},"Π":{utf:"U+03A0",wkt:"p",gem:""},"Ρ":{utf:"U+03A1",wkt:"r",gem:""},S:{utf:"U+XXXX",wkt:"s",gem:""},"Σ":{utf:"U+03A3",wkt:"s",gem:""},"Τ":{utf:"U+03A4",wkt:"t",gem:""},"Υ":{utf:"U+03A5",wkt:"u",gem:""},"Φ":{utf:"U+03A6",wkt:"ph",gem:""},"Χ":{utf:"U+03A7",wkt:"kh",gem:""},"Ψ":{utf:"U+03A8",wkt:"ps",gem:""},"Ω":{utf:"U+03A9",wkt:"ō",gem:""},"ͅ":{utf:"U+0345",wkt:"i",gem:10}};var b=t(2),x=t(4),v=t.n(x),k=t(3),w=t(5);let y=t(1),C=(t(23)("csv"),console.log),L=(t(6),t(4),t(24));function E(e,n,t,i){let o={};!function(e,n){n.forEach(n=>{n.forEach(n=>{if(!n.lang)return;n.text.split(" ").forEach(n=>{n=(n=Object(w.oxia)(Object(w.comb)(n))).toLowerCase(),e[n]?e[n].freq+=1:e[n]={wf:n,freq:1}})})})}(o,t),function(e,n,t,i){Object(k.readDictionary)(e,n).then(e=>{let n=y.flatten(y.compact(e.map(e=>e.docs)));L.pipe(function(e){let n=0;return L.from.obj((function(t,i){if(n==e.length)return i(null,null);let o=e[n];n++,i(null,o)}))}(t),L.parallel(5,j),function(e,n,t){let i={};return L.through.obj((function(e,n,t){e.forEach(e=>{let n={rdict:e.rdict,dict:Object(w.comb)(e.rdict),plain:e.plain};e.verb&&(n.verb=!0),e.name&&(n.name=!0),n.verb&&e.aug&&(n.aug=e.aug),e.key?n.key=e.key.split("-")[0]:e.keys&&(n.key=e.keys.split("-")[0]);let t=[e.dict,e.name,e.verb].join("-");i[t]||(i[t]=n)}),t()}),(function(e){let o=y.values(i);o.forEach(e=>{let t=y.find(n,n=>e.rdict==n.rdict);t&&(e.trns=t.trns)}),t(o),e(null,null)}))}(0,n,(function(e){i(e)})))}).catch(e=>{C("_______ANTRAX-ERR",e)})}(e,n,y.values(o),(function(e){i(e)}))}function j(e,n){let t=e.wf;if(!t)return n(null,null);Object(k.antrax)(t).then(e=>{let t=y.flattenDeep(e.chains.map(e=>e.map(e=>e.dicts)));t=y.filter(t,e=>e.name||e.verb),t=y.filter(t,e=>!e.possible);let i=y.flatten(e.terms);t.push(...i),t.forEach(e=>{delete e.reg,delete e.trns,delete e.dname,delete e.keys,delete e.fls,delete e.weight});let o={},r=[];t.forEach(e=>{let n=[e.plain,e.key,e.name,e.verb].join("-");o[n]||(r.push(e),o[n]=!0)}),n(null,r)}).catch((function(e){console.log("CSV-ANTRAX-ERR",e)}))}const{app:S}=t(0).remote,{dialog:U,getCurrentWindow:O}=t(0).remote,A=t(6),_=t(0).remote.require("electron-settings"),N=t(9);let z=l("#progress"),q=S.getPath("userData");console.log;function R(e,n){let t=l("#table-local-chunk");t&&f(t),(t=d("table","dicts-table")).id="table-local-chunk",t.dataset.dicts=JSON.stringify(e);let i=d("tr","table-chunk-header");t.appendChild(i);let o=d("td");o.textContent="wordform",i.appendChild(o);let r=d("td");if(r.textContent="pos",i.appendChild(r),n){let e=d("td");e.textContent="key",i.appendChild(e)}let a=d("td");return a.textContent="translation",i.appendChild(a),e.forEach(e=>{let i=d("tr","table-line");t.appendChild(i);let o=d("td");o.textContent=e.rdict,i.appendChild(o);let r=d("td");if(r.textContent=e.verb?"verb":e.name?"name":"-",i.appendChild(r),n){let n=d("td");n.textContent=e.key,i.appendChild(n)}let a=d("td");a.textContent=e.trns,i.appendChild(a)}),t}function B(e,n){let t=l("#table-local-chunk");if(!t)return;let i=JSON.parse(t.dataset.dicts);if(!i.length)return;let r=o.a.find(i,e=>e.rdict==n),a=l(e.sid),s=function(e){let n=l("#dict-item-container"),t=l("#choose-item-pos"),i=l("#item-dict");if(e){t.classList.add("is-hidden"),i.classList.remove("is-hidden");l("#dict-item-header");l("#dict-item-rdict").textContent=e.rdict;let n=l("#dict-item-pos"),o=e.verb?"verb":e.name?"name":e.pos;n.textContent=o;let r=l("#dict-item-input-text");r.value="",e.trns&&(r.value=e.trns.join("; "))}else t.classList.remove("is-hidden"),i.classList.add("is-hidden");return n}(r);a.appendChild(s),l("#dict-item-input-text").focus(),function(e,n,t){let i=_.get("state");if(!n){n={new:!0},l("#new-item-input-wf").focus()}let o=l("#dict-item-submit-ok");o&&f(o);(o=d("input","submit")).setAttribute("type","submit"),o.setAttribute("value","ok"),o.id="dict-item-submit-ok",t.appendChild(o);let r=l("#dict-item-submit-cancel");r&&f(r);(r=d("input","submit")).setAttribute("type","submit"),r.setAttribute("value","cancel"),r.id="dict-item-submit-cancel",t.appendChild(r);let a=l("#dict-item-input-text");a.onkeydown=function(e){"Escape"==e.key&&a.blur()};let s=l("#new-item-input-wf");s.onkeydown=function(e){"Escape"==e.key&&s.blur()};let c=l("#new-item-input-trns");c.onkeydown=function(e){"Escape"==e.key&&c.blur()},o.addEventListener("click",t=>{if(n.new){n.rdict=s.value.trim(),n.dict=Object(w.comb)(n.rdict);let t=l('[name = "dictpos"]:checked').value;"verb"==t?n.verb=!0:"name"==t&&(n.name=!0),t?n.plain=Object(w.plain)(n.rdict):(n.term=n.dict,n.pos="indecl"),n.trns=c.value.split(";"),e.push(n)}else n.verb||n.name||(n.term=Object(w.comb)(n.rdict)),n.trns=a.value.split(";");i.sec="local-chunk",ae(i,e)}),r.addEventListener("click",n=>{i.sec="local-chunk",ae(i,e)})}(i,r,s)}document.addEventListener("click",e=>{let n=e.target;if(!n||"deldict-submit"!=n.id)return;z.classList.remove("is-hidden");let t=b.config.ldname;Object(k.delDictionary)(q,t).then(e=>{if(!e)return;let n=_.get("state"),t=_.get("cfg");xe(t=o.a.filter(t,e=>e.dname!=b.config.ldname)),_.set("cfg",t),z.classList.add("is-hidden"),n.sec="main",ae(n)})}),document.addEventListener("click",e=>{let n=e.target.dataset;if(!n)return;let t=b.config.ldname,i=_.get("state");if(n.localdictfull)Object(k.readDictionary)(q,t).then(e=>{let n=o.a.flatten(e.map(e=>e.docs));i.sec="local-dict-full",ae(i,n)});else if(n.createlocalchunk){if(!i.pars)return;E(q,t,i.pars,e=>{i.sec="local-chunk",ae(i,e)})}else if(n.deletelocaldict){let e=b.config.ldname;Object(k.delDictionary)(q,e).then(e=>{if(!e)return;let n=_.get("state"),t=_.get("cfg");xe(t=o.a.filter(t,e=>e.dname!=b.config.ldname)),_.set("cfg",t),z.classList.add("is-hidden"),n.sec="main",ae(n)})}else if(n.exportlocaldict){let e={title:"save local dict"};U.showSaveDialog(null,e,e=>{let n=v.a.extname(e);n||(e=[e,n=".json"].join("")),[".json",".csv"].includes(n)&&Object(k.readDictionary)(q,t).then(t=>{let i,r=o.a.flatten(t.map(e=>e.docs)).map(e=>{if(!e.trns)return;let n=e.verb?"verb":e.name?"name":"-";return{dict:e.rdict,pos:n,key:e.key,trns:e.trns.join(";")}});if(r=o.a.compact(r),".json"==n)i=JSON.stringify(r,null,2);else if(".csv"==n){let e=r.map(e=>o.a.values(e).map(e=>JSON.stringify(e)));i=(e=e.map(e=>e.join(", "))).join("\n")}A.writeFile(e,i).then(()=>{console.log("file save success!",e)}).catch(e=>{console.error(e)})})})}}),N.bind(["ctrl+d"],(function(e){let n=_.get("state");if(!n.pars)return;let t=b.config.ldname;E(q,t,n.pars,e=>{n.sec="local-chunk",ae(n,e)})})),N.bind(["ctrl+shift+d"],(function(e){z.classList.remove("is-hidden");let n=_.get("state"),t=b.config.ldname;Object(k.readDictionary)(q,t).then(e=>{let t=o.a.flatten(e.map(e=>e.docs));n.sec="local-dict-full",ae(n,t)})}));var J=t(13),T=t.n(J);let D=o.a.values(m),F=g.dasia;console.log;function M(e,n,t){let i,r=Object(w.comb)(e).split("");return i="gem"==n?function(e,n){let t=[];return e.forEach(e=>{h[e]&&t.push(h[e].gem)}),o.a.sum(t)}(r):"beta"==n?function(e){let n=[];return e.forEach(e=>{h[e]&&n.push("B")}),n.join("")}(r):function(e){let n=[];return e.forEach(e=>{h[e]?n.push(h[e].wkt):e==F?n.unshift("h"):D.includes(e)&&n.push(g.oxia)}),n.join("")}(r)}const I=t(0).remote.require("electron-settings"),H=console.log;let P=l("#progress");function G(e){if(!e||!e.length)return;let n=l("#source"),t=l("#result");if(!n||!t)return;u(n),u(t),Z(),e.forEach(e=>{let t=function(e,n){let t=document.createElement("p");return t.textContent=e,n&&t.classList.add(n),t}();t.classList.add("par"),e.forEach(e=>{e.punct&&(e.text+=" ");let n=p(e.text);e.lang?n.classList.add("active-form"):e.punct?n.classList.add("punct"):n.classList.add("space"),t.appendChild(n)}),n.appendChild(t)});let i=c("span.active-form");if(1==i.length){let e=i[0];e&&W(e)}}function Z(){var e;e=".popup",document.querySelectorAll(e).forEach(e=>{e.parentElement.removeChild(e)})}function K(e,n){let t=d("div","popup");document.body.appendChild(t),t.classList.remove("is-hidden");let i=function(e){return e.getBoundingClientRect()}(e),o={top:i.top+24,left:i.left};n&&(o={top:i.top-32,left:i.left}),function(e,n){let t=[e.top,"px"].join(""),i=[e.left,"px"].join("");n.style.top=t,n.style.left=i}(o,t);let r=d("ul","compound-list");return t.appendChild(r),t}function W(e,n){P.classList.remove("is-hidden");let t=e.textContent.trim();(function(e,n){return Object(k.antrax)(e,n)})(t=function(e){let n=e.split(""),t=!1,i=[];return n.forEach(e=>{m.includes(e)?t||(i.push(e),t=!0):i.push(e)}),i.join("")}(Object(w.comb)(t)),n).then(t=>{if(P.classList.add("is-hidden"),!t)return H("NO RESULT"),void(l("#result").textContent="no resul, try Shift-click");n?function(e,n){if(!n.chains||!n.chains.length)return;if(1==n.chains.length&&1==n.chains[0].length)return;let t=K(e).querySelector(".compound-list");n.chains.forEach((e,i)=>{let o=d("li","comp-line");t.appendChild(o),e.forEach((t,r)=>{let a,s=!1;r==e.length-1&&(s=!0),a=p(t.seg,""),s||t.flexes||a.classList.add("comp-segment"),t.connector?a.classList.add("comp-connector"):t.dicts&&a.classList.add("active-dict"),a.dataset.segdicts=JSON.stringify(n.chains[i][r].dicts),a.dataset.cogns=JSON.stringify(n.chains[i][r].cogns),o.appendChild(a)})})}(e,t):function(e,n){let t=o.a.filter(n.chains,e=>1==e.length).map(e=>e[0]),i=o.a.flatten(t.map(e=>e.dicts)),r=o.a.flatten(t.map(e=>e.cogns));e.dataset.cogns=JSON.stringify(r),(i=o.a.uniq(i.map(e=>JSON.stringify(e))).map(e=>JSON.parse(e))).push(...n.terms),X(e,i)}(e,t)}).catch((function(e){console.log("ANTRAX-ERR",t,e)}))}function X(e,n){let t=e.textContent,i=l("#result");u(i);let r=function(e){let n=d("div","dict-query");return n.textContent=e,n}(t);i.appendChild(r);let a=I.get("cfg");(n=o.a.sortBy(n,(function(e){let n=o.a.find(a,n=>n.dname==e.dname);return n?n.idx:100}))).forEach(e=>{let n=function(e){let n=d("div","dict-container"),t=function(e){let n=d("div","dict-header"),t=p(e.dname,"dict-dname");"souda"==e.dname&&t.setAttribute("href",e.href);n.appendChild(t);let i=p(e.rdict,"dict-rdict");if(n.appendChild(i),e.verb){let e=p("verb","dict-pos");n.appendChild(e)}if(e.name){let e=p("name","dict-pos");n.appendChild(e)}else if(e.term&&e.pos){let t=p(e.pos,"dict-pos");n.appendChild(t)}else if(e.suf){let e=p("suff","dict-pos");n.appendChild(e)}else if(e.pref){let e=p("pref","dict-pos");n.appendChild(e)}if(e.gends){let t=p(e.gends.toString(),"dict-gends");n.appendChild(t)}return n}(e);n.appendChild(t);let i=function(e){let n,t=e.fls,i=o.a.filter(t,e=>e.degree);if(!(t=o.a.filter(t,e=>!e.degree)))return;if(e.verb){let e=o.a.filter(t,e=>e.numper),i=o.a.filter(t,e=>e.numcase),r=o.a.filter(t,e=>!e.numcase&&!e.numper);if(n=e.map(e=>[e.tense,e.numper].join(" ")),i.length){let e=i.map(e=>[e.tense,[e.gend,e.numcase].join(".")].join(", "));n.push(...e)}if(r.length){let e=r.map(e=>e.tense);n.push(...e)}}else n="adv"==e.pos?t.map(e=>e.degree):e.gends?t.map(n=>[e.gends.toString(),n.numcase].join(".")):e.name?t.map(e=>[e.gend,e.numcase].join(".")):"pron"==e.pos?t.map(e=>[e.gend||"-",e.numcase].join(".")):t.map(e=>[e.gend,e.numcase].join("."));if(i.length){let e=i.map(e=>e.degree);n.push(...e)}let r=o.a.filter(n,e=>!/du/.test(e));r.length&&(n=r);let a=o.a.filter(n,e=>!/voc/.test(e));a.length&&(n=a);return n.sort()}(e);if(i){let e=function(e){let n=d("ul","dict-fls");return e.forEach(e=>{let t=d("li");t.textContent=e,n.appendChild(t)}),n}(i);n.appendChild(e)}if(e.trns){let t=function(e){let n=d("ul","dict-trns");e.trns||(e.trns=["no transtation for this dict article"]);return e.trns.forEach(e=>{let t=d("li","dict-trns-li"),i=e.split(/, [A-Z]| [A-Z][^ ]*[0-9]/)[0],o=p(i,"dict-trns-li-shown");t.appendChild(o);let r=e.replace(i,"").split("(").join('<span class="grey">').split(")").join("</span>");if(r){let e=p("","is-hidden");e.innerHTML=r,e.classList.add("dict-trns-li-hidden"),t.appendChild(e),o.classList.add("ellipsis")}n.appendChild(t)}),n}(e);n.appendChild(t)}return n}(e);i.appendChild(n)})}const $=t(10),V=console.log,Y=t(0).remote.require("electron-settings"),Q=t(9),{getCurrentWindow:ee}=t(0).remote;t(25).markdown;let ne,te=[],ie=0;function oe(){ie<=0||(ie--,ae())}function re(){ie>=te.length-1||(ie++,ae())}function ae(e,n){if(e){let n=o.a.clone(e);te.push(n),ie=te.length-1}else e=te[ie];let t=e.sec,i=function(e){let n=Y.get("lang")||"eng";const t=c(".section");let i,o;return Array.prototype.forEach.call(t,e=>{e.classList.add("is-hidden")}),(i=l(o=["#",e.sec,"_",n].join("")))||(i=l(o=["#",e.sec,"_",b.config.deflang].join(""))),i||V("____________ NO SEC ID !!!!",o),i.classList.remove("is-hidden"),o}(e);e.sid=i,"main"==t?(function(e){if(ne)return;let n=Y.get("split-sizes")||b.config.splitSizes;ne=T()(["#source","#result"],{sizes:n,gutterSize:5,cursor:"col-resize",minSize:[0,0],onDragEnd:function(e){Y.set("split-sizes",e),ee().reload()}}),e.mono&&ne.collapse(e.mono)}(e),G(e.pars)):"remote-dicts"==t?(ve(le.get("cfg")),ue(me,(function(e,n,t){if(e&&console.error("soket error:",e),e)return;if(n&&200!=n.statusCode)return;let i=JSON.parse(t),r=o.a.filter(i,e=>"_"!=e[0]);he.body={keys:r},ue(he,(function(e,n,t){if(e&&console.error("post soket error:",e),n&&200!=n.statusCode)return;let i=t.map(e=>({dname:e.key,size:e.info.doc_count}));Promise.all(r.map((function(e){let n=[b.config.host,e].join("/");return new fe(n).get("description").then(n=>(n.dname=e,n)).catch(e=>{"missing"!=e.reason&&pe("REMOTE-ERR:",e.reason)})}))).then((function(e){let n=b.config.code,t=new RegExp(n);e=o.a.compact(e),e=o.a.filter(e,e=>t.test(e.langs));let r=[],a=le.get("cfg")||[];e.forEach(e=>{let n=o.a.find(i,n=>n.dname==e.dname);if(!n)return;let t=o.a.find(a,n=>n.dname==e.dname);t&&(t.name=e.name,t.langs=e.langs),t||(e.size=n.size,delete e._id,delete e._rev,r.push(e))}),a.push(...r),a.forEach((e,n)=>{e.idx=n}),a=o.a.sortBy(a,"idx"),a=JSON.parse(JSON.stringify(a)),le.set("cfg",a),ve(a)})).catch(e=>{console.log("ERR: possible, no connection",e)})}))}))):"local-chunk"==t?function(e,n){if(!n)return;let t=l(e.sid),i=l("#new-dict-item-link"),r=R(n);t.insertBefore(r,i);let a=o.a.filter(n,e=>e.trns);if(!a.length)return;let s=l("#dict-table-submit-ok");s&&f(s),(s=d("input","submit")).setAttribute("type","submit"),s.setAttribute("value","merge filled to current local dict"),s.id="dict-table-submit-ok",t.appendChild(s);let c=a.map(e=>({_id:e.plain||e.term,docs:[e]}));s.addEventListener("click",n=>{Object(k.updateCurrent)(q,c).then(n=>{let t=_.get("cfg"),i=o.a.find(t,e=>e.dname==b.config.ldname);i||(i={active:!0,dname:"local",name:"Local",idx:0,langs:"grc,any"},t.unshift(i),t.forEach((e,n)=>{e.idx=n}),xe(t)),i.size=n.size,_.set("cfg",t),e.sec="main",ae(e)}).catch(e=>{console.log("ERR: update local dict",e)})})}(e,n):"local-dict-full"==t?function(e,n){if(!n)return;let t=l(e.sid),i=l("#full-local-dict-banner"),o=R(n,!0);t.insertBefore(o,i)}(e,n):"local-dict-item"==t&&B(e,n),l("#progress").classList.add("is-hidden"),Y.set("state",e)}r.ipcRenderer.on("action",(function(e,n){"goleft"==n?oe():"goright"==n&&re()})),Q.bind(["ctrl+1","ctrl+2"],(function(e){})),Q.bind(["esc"],(function(e){Z()})),Q.bind(["alt+left","alt+right"],(function(e){37==e.which?oe():39==e.which&&re()})),Q.bind(["ctrl+p"],(function(e){let n=l("span.active-form:hover")||l("span.active-dict:hover");if(!n)return;let t=["http://www.perseus.tufts.edu/hopper/morph?l=",n.textContent,"&la=greek#lexicon"].join("");r.shell.openExternal(t)})),Q.bind(["ctrl+f"],(function(e){let n=Y.get("cfg"),t=n.map(e=>[e.dname,e.idx,e.active].join("-"));n=JSON.parse(JSON.stringify(n)),console.log("_________F-CFG:",n,"dnames:",t)})),Q.bind(["ctrl+r"],(function(e){let n=o.a.last(te);te=[n],ie=0})),Q.bind(["ctrl+c"],(function(e){let n=l(".active-form:hover");if(!n)return;let t=n.textContent;if(!t)return;let i=[t," "].join("");$.writeText(i)})),Q.bind(["ctrl+z"],(function(e){let n={sec:b.config.defstate};Y.set("state",n);let t=Y.get("cfg");xe(t=JSON.parse(JSON.stringify(t))),V("== INIT STATE == ",t)})),Q.bind(["ctrl+shift+z"],(function(e){let n={sec:b.config.defstate};Y.set("state",n);let t=[];Y.set("cfg",t),V("== ZERO STATE CFG == ",t)})),Q.bind(["space"],(function(e){!function(){let e=c(".dict-trns");if(!e.length)return;let n=c(".dict-fls"),t=e[0];t&&(t.classList.contains("is-hidden")?(e.forEach(e=>{e.classList.remove("is-hidden")}),n.forEach(e=>{e.classList.remove("is-hidden")})):(e.forEach(e=>{e.classList.add("is-hidden")}),n.forEach(e=>{e.classList.add("is-hidden")})))}()})),Q.bind(["tab"],(function(e){!function(){let e=c(".dict-trns");if(!e.length)return;let n=c(".dict-fls"),t=(l("ul.dict-trns:not(.is-hidden)"),0);e.forEach((e,i)=>{e.classList.contains("is-hidden")||(t=i+1),e.classList.add("is-hidden"),n[i]&&n[i].classList.add("is-hidden")}),t==e.length&&(t=0),e[t].classList.remove("is-hidden"),n[t]&&n[t].classList.remove("is-hidden")}()})),Q.bind(["ctrl+="],(function(e){let n=r.webFrame.getZoomFactor()+.1;r.webFrame.setZoomFactor(n)})),Q.bind(["ctrl+-"],(function(e){let n=r.webFrame.getZoomFactor()-.1;r.webFrame.setZoomFactor(n)})),Q.bind(["ctrl+0"],(function(e){r.webFrame.setZoomFactor(1)}));const{app:se}=t(0).remote,le=t(0).remote.require("electron-settings"),ce=(t(6),se.getPath("userData")),de=se.getAppPath(),pe=console.log,ue=t(26);let fe=t(27),ge=l("#progress");const me={url:[b.config.host,"_all_dbs"].join("/")},he={method:"POST",url:[b.config.host,"_dbs_info"].join("/"),json:!0,headers:{"Content-type":"application/json"}};let be=le.get("cfg");function xe(e){let n=o.a.filter(e,e=>e.active).map(e=>e.dname);Object(k.checkConnection)(ce,n)}function ve(e){!function(){let e=l("#dicts-remote");e&&u(e);let n=d("table","dicts-table");n.id="table-dicts-remote";let t=d("tr","table-header");t.id="table-header-remote",n.appendChild(t);let i=d("td");i.textContent="dict's name",t.appendChild(i);let o=d("td");o.textContent="docs",t.appendChild(o);let r=d("td");r.textContent="langs",t.appendChild(r);let a=d("td");a.textContent="info",t.appendChild(a);let s=d("td");s.textContent="clone:",t.appendChild(s);let c=d("td");c.textContent="activate:",t.appendChild(c),e.appendChild(n)}();let n=l("#table-dicts-remote");e.forEach(e=>{let t=d("tr");t.dataset.dname=e.dname,n.appendChild(t);let i=d("td","dname");t.appendChild(i),i.textContent=e.name,i.dataset.dname=e.dname;let o=d("td","dsize");o.textContent=e.size,t.appendChild(o);let r=d("td","dlang");r.textContent=e.langs,t.appendChild(r);let a=d("td","dinfo");a.textContent="info",a.dataset.dinfo=e.dname;let s=JSON.stringify(e);a.setAttribute("title",s),t.appendChild(a);let l=d("td","link");if(e.sync){let e=ke();l.appendChild(e)}else{l.dataset.sync=e.dname;let n=e.dname==b.config.ldname?"---":"clone";l.textContent=n}t.appendChild(l);let c=d("td","link");if(e.active){let n=ke();n.dataset.disable=e.dname,c.appendChild(n)}else{c.dataset.activate=e.dname;let n=e.sync||e.dname==b.config.ldname?"activate":"";c.textContent=n}t.appendChild(c)})}function ke(){let e=d("img","dict-check");return e.setAttribute("src","../resources/check.png"),e}function we(e){ge.classList.remove("is-hidden");let n=v.a.resolve(ce,"pouch",e),t=[b.config.host,e].join("/"),i=new fe(n);new fe(t).replicate.to(i,{retry:!0,batch_size:1e3}).on("change",(function(e){console.log("written",e.docs_written)})).on("paused",(function(e){console.log("paused",e)})).on("complete",(function(n){console.log("ok, were done!",n);let t=function(e){let n=le.get("cfg"),t=o.a.find(n,n=>n.dname==e);return t?(t.active=!0,t.sync=!0,n=JSON.parse(JSON.stringify(n)),le.set("cfg",n),n):n}(e);xe(t),ve(t),ge.classList.add("is-hidden")})).on("error",(function(e){console.log("boo, something went wrong!",e)}))}function ye(e,n){let t=le.get("cfg");t=JSON.parse(JSON.stringify(t));let i=o.a.find(t,n=>n.dname==e);if(!i)return;i.active=!!n;o.a.filter(t,e=>e.active).map(e=>e.dname);le.set("cfg",t),xe(t),ve(t)}be&&be.length?xe(be):Object(k.getCfg)(de,ce).then(e=>{xe(e),le.set("cfg",e)}).catch(e=>{pe("CFG-ERR:",e)});let Ce=t(28)({html:!0}),Le=t(29);Ce.use(Le);console.log;const Ee=t(6),je=t(4);const Se=t(0).remote.require("electron-settings"),Ue=r.remote.Menu,Oe=r.remote.MenuItem,Ae=(console.log,r.remote.app);let _e,Ne=l("#progress"),ze=Ae.getPath("userData");const qe=new Oe({label:"Perseus Greek Word Study Tool",click:e=>{if(!_e)return;let n=["http://www.perseus.tufts.edu/hopper/morph?l=",_e.textContent,"&la=greek#lexicon"].join("");r.shell.openExternal(n)}}),Re=new Oe({label:"Wiktionary (esp. for particles)",click:()=>{if(!_e)return;let e=["https://en.wiktionary.org/wiki/",_e.textContent,"#Ancient_Greek"].join("");r.shell.openExternal(e)}}),Be=new Oe({label:"Souda dictionary",click:()=>{if(!_e)return;_e.textContent;let e=c(".dict-dname"),n=o.a.find(e,e=>"souda"==e.textContent);if(!n)return;let t=["https://www.cs.uky.edu/~raphael/sol/sol-entries/",n.getAttribute("href")].join("");r.shell.openExternal(t)}}),Je=new Oe({label:"create local dictionary for current text",click:()=>{Ne.classList.remove("is-hidden");let e=Se.get("state");if(!e.pars)return;let n=b.config.ldname;E(ze,n,e.pars,n=>{e.sec="local-chunk",ae(e,n)})}}),Te=new Oe({label:"show full local dictionary",click:()=>{Ne.classList.remove("is-hidden");let e=Se.get("state"),n=b.config.ldname;Object(k.readDictionary)(ze,n).then(n=>{let t=o.a.flatten(n.map(e=>e.docs));e.sec="local-dict-full",ae(e,t)})}}),De=new Oe({label:"back in history",click:()=>{oe()}}),Fe=new Oe({label:"forward in history",click:()=>{re()}});console.log,r.remote.app;const Me=t(10),Ie=t(0).remote.require("electron-settings"),He=t(30);!function(e){let n=l("#container");e.langs.forEach(t=>{e.pages.forEach(e=>{let i,o,r;try{i=je.resolve(__dirname,"../src/sections",t,[e,"md"].join(".")),o=Ee.readFileSync(i).toString(),r=Ce.render(o)}catch(e){return}let a=d("div","section");a.id=[e,t].join("_"),a.setAttribute("lang",t),a.classList.add("is-hidden"),a.innerHTML=r,n.appendChild(a.cloneNode(!0))})})}(b.config),document.onmousedown=function(e){if(2!=e.button)return;const n=new Ue;n.append(De),n.append(Fe),n.append(new Oe({type:"separator"})),n.append(Je),n.append(Te),n.append(new Oe({type:"separator"})),(_e=e.target).classList.contains("active-form")&&(n.append(qe),n.append(Re),n.append(Be)),e.preventDefault(),n.popup(r.remote.getCurrentWindow())};let Pe=Ie.get("state");Pe||(Pe={sec:b.config.defstate},Ie.set("state",Pe));let Ge=Ie.get("lang");Ge||(Ge=b.config.deflang,Ie.set("lang",Ge)),ae(Pe),r.ipcRenderer.on("section",(function(e,n){Pe.sec=n,ae(Pe)})),r.ipcRenderer.on("lang",(function(e,n){Ie.set("lang",n),r.ipcRenderer.send("lang",n),r.remote.getCurrentWindow().reload()})),Me.on("text-changed",()=>{let e=Me.readText();if(" "==o.a.last(e))return;let n=function(e){let n=e.trim();return n=(n=(n=(n=n.replace(/ᾰ/gi,"α").replace(/ᾱ/gi,"α").replace(/ῑ/gi,"ι").replace(/ῐ/gi,"ι").replace(/ῠ/gi,"υ").replace(/ῡ/gi,"υ")).replace(/̆/gi,"")).replace(/-/g,"")).replace(/\' /g,"᾽ ").replace(/\’ /g,"᾽ ")}(e),t=s()(n,b.config.code);t&&(Pe.sec="main",Pe.pars=t,Ie.set("state",Pe),ae(Pe))}).startWatching();l("#progress"),l("#message");document.addEventListener("click",e=>{let n=e.target,t=n.parentElement;if(n.classList.contains("external")){let t=n.getAttribute("href");t||(t=n.textContent),e.preventDefault(),r.shell.openExternal(t)}else if(n.classList.contains("dict-dname"))Pe.sec="dict-edit",ae(Pe);else if(t&&t.classList.contains("table-line")){let e=t.firstChild;if(!e)return;let n=e.textContent;if(!n)return;Pe.sec="local-dict-item",ae(Pe,n)}else if(n.classList.contains("active-form")||n.classList.contains("active-dict"))e.ctrlKey?function(e){if("undefined"==e.dataset.cogns||!e.dataset.cogns||!e.dataset.cogns.length)return;let n=JSON.parse(e.dataset.cogns),t=K(e).querySelector(".compound-list");t.classList.add("cognate-list");let i=o.a.groupBy(n,"rdict");for(let e in i){let n=i[e],o=d("li","cognate-line");o.textContent=e,o.dataset.dicts=JSON.stringify(n),t.appendChild(o)}}(n):W(n,!0);else if(n.classList.contains("dict-query")){let e=n.nextSibling;e&&e.classList.contains("is-hidden")?e.classList.remove("is-hidden"):e&&e.classList.add("is-hidden")}else if(n.classList.contains("dict-header")||n.classList.contains("dict-rdict")||n.classList.contains("dict-pos")||n.classList.contains("dict-gends")){let e=n.closest(".dict-container"),t=e.querySelector(".dict-fls"),i=e.querySelector(".dict-trns");t&&t.classList.contains("is-hidden")?t.classList.remove("is-hidden"):t&&t.classList.add("is-hidden"),i.classList.contains("is-hidden")?i.classList.remove("is-hidden"):i.classList.add("is-hidden")}else if(n.classList.contains("dict-trns-li-shown")){let e=n.nextSibling;if(!e)return;e.classList.contains("is-hidden")?(e.classList.remove("is-hidden"),n.classList.remove("ellipsis")):(e.classList.add("is-hidden"),n.classList.add("ellipsis"))}else if(n.classList.contains("dict-trns-li-hidden")){let e=n.previousSibling;e&&(n.classList.add("is-hidden"),e.classList.add("ellipsis"))}}),document.addEventListener("click",e=>{let n=e.target,t=n.dataset;if(t)if(t.href){l("#new-version").classList.add("is-hidden"),r.shell.openExternal(t.href)}else if(t.dname)!function(e,n){let t=le.get("cfg");(t=JSON.parse(JSON.stringify(t))).forEach((e,n)=>{e.idx=n});let i=o.a.find(t,n=>n.dname==e);if(i){if(n){if(i.idx>=t.length-1)return;t[i.idx+1].idx=i.idx,i.idx=i.idx+1}else{if(i.idx<1)return;t[i.idx-1].idx=i.idx,i.idx=i.idx-1}t=o.a.sortBy(t,"idx"),le.set("cfg",t),ve(t)}}(t.dname,e.shiftKey);else if(t.activate){if("activate"!=n.textContent)return;ye(t.activate,!0)}else t.disable?ye(t.disable,!1):t.sync?we(t.sync):t.section&&(Pe.sec=t.section,ae(Pe))}),document.addEventListener("mouseover",(function(e){let n=e.target;if(n.textContent&&!e.ctrlKey)if(e.altKey){if(!n.classList.contains("active-form"))return;!function(e,n){Z();let t,i=K(e,!0);n&&(t="gem");let o=M(e.textContent,t);i.textContent=o}(n,e.shiftKey)}else n.classList.contains("active-form")?(n.classList.contains("active-form")&&Z(),W(n)):n.classList.contains("active-dict")?function(e){if(u(l("#result")),!e.dataset.segdicts)return;let n=JSON.parse(e.dataset.segdicts);n.length&&X(e,n)}(n):n.classList.contains("cognate-line")&&function(e){if(u(l("#result")),!e.dataset.dicts)return;let n=JSON.parse(e.dataset.dicts);n.length&&X(e,n)}(n)}),!1),r.ipcRenderer.on("version",(function(e,n){He.get("https://api.github.com/repos/mbykov/biblos.js/releases/latest").then((function(e){if(!e||!e.data)return;let t=e.data.name;if(n&&t&&t>n){let e=l("#new-version"),n=["new version available:",t].join(" ");e.textContent=n,e.classList.remove("is-hidden")}})).catch((function(e){console.log("API.GITHUB ERR")}))})),document.addEventListener("wheel",(function(e){!function(e){let n=e.target.closest("#source")||e.target.closest("#result")||e.target.closest(".section");if(!n)return;let t,i=n.id,o=l("#source"),r=l("#result");t=1==e.shiftKey||1==e.ctrlKey?"source"==i?r:o:n;if(!t)return;let a=e.deltaY>0?32:-32;t.scrollTop+=a}(e)}),!1)}]);
//# sourceMappingURL=app.js.map