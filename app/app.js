!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=31)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("lodash")},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return i}));const i={code:"grc",host:"http://diglossa.org:5984",pages:["home","main","remote-dicts","arrange-dicts","db-info","arrange-dicts","help","dict-edit","local-chunk","local-dict-full","local-dict-item","localdict-help","about","authentic","code","license","acknowledgements","arrange-dicts","contacts","csv"],defstate:"home",splitSizes:[50,50],langs:["eng","deu","rus"],ldname:"local",deflang:"eng"}},function(e,t){e.exports=require("antrax")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("orthos")},function(e,t){e.exports=require("fs-extra")},function(e){e.exports=JSON.parse('{"name":"development","description":"Add here any environment specific stuff you like."}')},function(e,t){e.exports=require("mousetrap")},,function(e,t){e.exports=require("electron-clipboard-extended")},,function(e,t){e.exports=require("speckled-band")},function(e,t){e.exports=require("split.js")},,function(e,t,n){var i=n(16);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(20)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(17)(!1);var i=n(18)(n(19));t.push([e.i,'/* @import "./treeview.min.css" */\n\n/* .is-shown { */\n/*     display: block!important; */\n/* } */\n\n.is-hidden {\n  display: none!important;\n}\n\n#main {\n    margin: 0;\n    padding: 10px;\n    height: 100%;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n#home {\n    padding-top: 25px;\n}\n\n#title {\n    margin: 0;\n    padding: 10px;\n    height: 100%;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n.section {\n    margin: 15px;\n    margin-left: 25px;\n    display: block;\n    overflow-y: hidden;\n    height: 100%;\n    padding-bottom: 120px;\n    margin-bottom: 120px;\n    font-family: "Helvetica Neue", Helvetica, Arial;\n    /* font-size: 1em; */\n    position: relative;\n}\n\n.split {\n    overflow-y: auto;\n    overflow-x: hidden;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.gutter {\n    background-color: #eee;\n    background-repeat: no-repeat;\n    background-position: 50%;\n    height: 100%;\n    width: 5px;\n}\n\n.gutter.gutter-horizontal {\n    background-image: url('+i+");\n    cursor: ew-resize;\n}\n\n.split, .gutter.gutter-horizontal {\n    height: 100%;\n    float: left;\n}\n\n#source {\n    font-family: \"Helvetica Neue\", Helvetica, Arial;\n    font-size: 1em;\n    padding-left: 15px;\n    padding-top: 25px;\n    padding-bottom: 25px;\n    overflow-y: hidden;\n    line-height: 1.5;\n    /* overflow-x: hidden; */\n}\n\n#result {\n    font-family: \"Helvetica Neue\", Helvetica, Arial;\n    font-size: 0.9em;\n    padding-left: 15px;\n    padding-top: 25px;\n    padding-bottom: 25px;\n    overflow-y: hidden;\n    overflow-x: hidden;\n}\n\n.link {\n  cursor: pointer;\n  color: maroon;\n}\n\n.dinfo {\n    /* cursor: pointer; */\n    color: maroon;\n}\n\n.dname {\n    cursor: pointer;\n}\n\n.clause {\n    background-color: #eee;\n}\n\n\n/* span { */\n    /* padding-right: 5px; */\n/* } */\n\nspan.space {\n    padding-right: 0;\n}\n\nspan.tibphrase {\n    padding-right: 0;\n}\n\nspan.term {\n    padding-right: 0;\n}\n\nspan.tibphrase:hover {\n    /* background-color: #eee8aa; */\n}\n\nspan.tibwf:hover {\n  background-color: #eee8aa;\n}\n\n.grey {\n    color: grey;\n}\n\nli.hidden {\n  display: none;\n}\n\n.hidden {\n    display: none; /* !important */;\n}\n\n.activetrn {\n    display: block!important;\n}\n\ninput[type='file'] {\n    color: transparent;\n}\n\n.maroon {\n    color: maroon;\n}\n\n/* span.clear { clear: left; display: block; } */\n\n#book {\n  padding-top: 0;\n  margin: 0;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: hidden;\n}\n\n#headers {\n  margin: 0;\n  height: 30px;\n}\n\n#headers > p {\n  margin: 0;\n  -webkit-margin-before: 0;\n}\n\n#trns > p.hidden {\n  display: none;\n}\n\n.hleft {\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  /* padding-left: 15px; */\n  padding-right: 15px;\n  color: maroon;\n}\n\n.hright {\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  padding-left: 15px;\n  padding-right: 15px;\n  color: maroon;\n}\n\n.header {\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  background: white;\n  padding: 5px;\n  padding-left: 15px;\n  padding-right: 15px;\n}\n\n/* #headers { */\n/*   height: 16px; */\n/*   padding-bottom: 10px; */\n/* } */\n\n#book > div.hright > ul  {\n  margin: 0;\n  padding: 0;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n}\n\n#book {\n  margin: 0;\n  padding: 0;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n}\n\n.bookTitle {\n  margin-top: 80px;\n  margin-left: 50px;\n}\n\n.author {\n  font-size: 18px;\n}\n\n.title {\n  color: maroon;\n  font-size: 24px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.check-name {\n  padding-left: 5px;\n}\n\nspan.query {\n    cursor: pointer;\n    color: maroon;\n    font-weight: bold;\n}\n\n.libauth {\n  padding-top: 25px;\n  cursor: pointer;\n}\n\n.lib-auth {\n  padding: 10px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial;\n  font-size: 16px;\n  color: maroon;\n}\n\n.lib-auth::after {\n  content: ':'\n}\n\n.lib-title {\n  padding: 10px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial;\n  font-size: 16px;\n}\n\n.book-content {\n  padding-left: 10px;\n  font-size: 18px;\n  color: maroon;\n}\n\n/* #book > div.hleft.header > div > div:nth-child(2) */\ndiv.hleft.header > div.tree {\n  /* display: none; */\n}\n\n.qlink {\n  padding-right: 15px;\n  color: maroon;\n  cursor: pointer;\n}\n\n.qtext {\n  padding-left: 15px;\n}\n\n/* #source > div:nth-child(2) > p:nth-child(4) */\n/* #source > div:nth-child(2) > div > p:nth-child(2) */\ndiv.qtext > p.hidden {\n  display: none;\n}\n\n.disclaimer {\n  font-size: 10px;\n  }\n\n.qtitle {\n  color: maroon;\n  font-size: 24px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.statline {\n    padding-left: 25px;\n}\n\n.statnic {\n    width: 150px;\n}\n\n.statnic::after {\n    content: ': ';\n}\n\n.green {\n    color: green;\n}\n\n.red {\n    color: red;\n}\n\n#transcript {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  /* background-color: white; */\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1100;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  font-size: 16px;\n  padding: 3px;\n  background-color: #e6ffcc;\n}\n\n#ambi {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  padding: 3px;\n  background-color: white;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.upper {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: black;\n  display: 'block';\n  padding: 3px;\n  position: absolute;\n  z-index: 1001;\n  box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n  height: auto;\n  top: 250px;\n  left: 300px;\n  /* font-family: 'DejaVu Sans'; */\n  padding: 3px;\n  background-color: white;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.danger {\n  background-color: #fff2e6;\n}\n\n#ambi > ul {\n  /* magrin: 0; */\n  /* padding-inline-start: 0; */\n  /* margin-block-start: 0; */\n  /* margin-block-end: 0; */\n  padding: 3px;\n}\n\n#ambi > ul > li > span {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.upper > ul > li > span {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\nspan.active-form {\n    cursor: pointer;\n}\n\nspan.active-form:hover {\n    background-color: #eee8aa;\n}\n\nspan.active-dict {\n    cursor: pointer;\n}\n\nspan.active-dict:hover {\n    background-color: #eee8aa;\n}\n\n.punct {\n    padding-right: 2px;\n}\n\n/* .dict-div { */\n/* } */\n\n.dict-query {\n    color: maroon;\n    background-color: #eee;\n    padding-left: 5px;\n    padding-top: 5px;\n    margin-top: 5px;\n    /* padding-right: 15px; */\n}\n\n.dict-header {\n    margin-top: 5px;\n    cursor: pointer;\n}\n\n.dict-div {\n}\n\n.dict-ul {\n  font-size: small;\n  /* padding-left: 15px; */\n}\n\n.dict-dname {\n  float: right;\n  color: green;\n}\n\n.dict-gends {\n    font-style: italic;\n    padding-left: 5px;\n}\n\n.dict-pos {\n    font-style: italic;\n    background-color: #99ff99;\n    margin-left: 5px;\n    margin-right: 5px;\n}\n\n.dict-rdict {\n    width: 50%;\n    padding: 5px;\n}\n\nul.dict-fls {\n    padding-left: 15px;\n    padding-top: 5px;\n    padding-bottom: 5px;\n    background-color: #A4F3F3;\n}\n\nul.dict-trns {\n    padding-top: 5px;\n    padding-left: 25px;\n    line-height: 1.3;\n    list-style: none;\n}\n\n.ellipsis::after {\n    content: '...'\n}\n\n.dict-article {\n    padding-top: 12px;\n}\n\n.dicts-table {\n  width: 100%;\n  margin-top: 25px;\n}\n\n\n#arrange-dicts {\n  margin-top: 50px;\n}\n\n.dictname {\n  cursor: pointer;\n  color: maroon;\n}\n\n.dict-check {\n  width: 20px;\n  height: 20px;\n}\n\n.active-dict {\n  width: 100px;\n}\n\n#pechatxt {\n  padding-left: 15px;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  font-family: 'YagpoUni';\n  font-size: 1.5em;\n}\n\n.dictcsv {\n  color: maroon;\n  cursor: pointer;\n}\n\n.table-header {\n  color: maroon;\n  font-weight: bold;\n}\n\nul.info-table {\n    line-height: 1.5em;\n    list-style: none;\n\n}\n\n.popup {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    color: black;\n    display: 'block';\n    padding: 3px;\n    position: absolute;\n    z-index: 1001;\n    box-shadow: 0.15em 0.15em 1em rgba(0, 0, 0, 0.75);\n    height: auto;\n    top: 250px;\n    left: 300px;\n    background-color: white;\n    font-size: 1.0em;\n}\n\n.comp-segment {\n    /* color: 'red'; */\n}\n\n.comp-segment:after {\n    content: ' - ';\n}\n\n.sect-dicts-ul {\n    list-style: none;\n    padding: 5px;\n    background-color: #E9FED6;\n}\n\n.sect-dict-line {\n    cursor: pointer;\n}\n\n.cognate-list {\n    padding: 5px;\n    background-color: #E9FED6;\n}\n\nli.cognate-line {\n    padding-right: 5px;\n    padding-left: 5px;\n}\n\nli.cognate-line:hover {\n    /* background-color: #E9FED6; */\n    padding-right: 5px;\n    padding-left: 5px;\n    background-color: white;\n}\n\n.table-chunk-header {\n    color: maroon;\n    font-weight: bold;\n    margin-bottom: 15px;\n    paddicg-bottom: 15px;\n}\n\n.table-line {\n    cursor: pointer;\n}\n\n.table-line:hover {\n    background-color: #eee8aa;\n}\n\n.dict-item {\n    padding-right: 5px;\n}\n\n.dict-item-rdict {\n    color: maroon;\n    font-weight: bold;\n}\n\n#dict-item-pos {\n    color: green;\n}\n\n.dict-item-input-text {\n    width: 80%;\n}\n\n.submit {\n    margin-top: 25px;\n    margin-right: 5px;\n}\n\n.section-ul {\n    list-style-type: disc;\n    margin-left: 15px;\n}\n\nul.dict-fls {\n    list-style: none;\n    line-height: 1em;\n}\n\n.compound-list {\n    list-style: none;\n}\n\n.error-message {\n    color: red;\n    padding: 10px;\n}\n\n.section-descr {\n    font-size: 0.9em;\n}\n\n#dict-table-submit-ok {\n    margin-bottom: 100px;\n}\n\n#new-dict-item-link {\n    margin-top: 25px;\n}\n\n.local-item-pos {\n    margin-left: 15px;\n    margin-right: 5px;\n}\n\n.banner {\n    margin-top: 15px;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(r).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){e.exports=n.p+"aeed77a8b9081818ddf762cf8f7e2829.png"},function(e,t,n){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=s.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),c=null,d=0,p=[],f=n(21);function u(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function g(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=p[p.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function b(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return x(t,e.attrs),m(e,t),t}function x(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function v(e,t){var n,i,o,r;if(t.transform&&e.css){if(!(r="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var a=d++;n=c||(c=b(t)),i=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",x(t,e.attrs),m(e,t),t}(t),i=L.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),i=C.bind(null,n),o=function(){h(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=g(e,t);return u(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&u(g(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var k,y=(k=[],function(e,t){return k[e]=t,k.filter(Boolean).join("\n")});function w(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function C(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function L(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=f(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("mississippi")},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("pouchdb")},function(e,t){e.exports=require("markdown-it")},function(e,t){e.exports=require("markdown-it-attrs")},function(e,t){e.exports=require("axios")},,function(e,t,n){"use strict";n.r(t);n(15);var i=n(1),o=n.n(i),r=n(0),a=(n(7),n(12)),s=n.n(a);n(22);function l(e){return document.querySelector(e)}function c(e){return document.querySelectorAll(e)}function d(e,t){let n=document.createElement(e);return t&&n.classList.add(t),n}function p(e,t){let n=document.createElement("span");return n.textContent=e,t&&n.classList.add(t),n}function f(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.lastChild)}function u(e){e&&e.parentElement.removeChild(e)}const g={oxia:"́",varia_:"`",varia:"̀",peris:"͂","":"",psili:"̓",dasia:"̔","":""},m=[g.oxia,g.varia,g.peris];const h={"α":{utf:"U+03B1",wkt:"a",gem:1},"β":{utf:"U+03B2",wkt:"b",gem:2},"γ":{utf:"U+03B3",wkt:"g",gem:3},"δ":{utf:"U+03B4",wkt:"d",gem:4},"ε":{utf:"U+03B5",wkt:"e",gem:5},"ζ":{utf:"U+03B6",wkt:"z",gem:7},"η":{utf:"U+03B7",wkt:"ē",gem:8},"θ":{utf:"U+03B8",wkt:"th",gem:9},"ι":{utf:"U+03B9",wkt:"i",gem:10},"κ":{utf:"U+03BA",wkt:"k",gem:20},"λ":{utf:"U+03BB",wkt:"l",gem:30},"μ":{utf:"U+03BC",wkt:"m",gem:40},"ν":{utf:"U+03BD",wkt:"n",gem:50},"ξ":{utf:"U+03BE",wkt:"ks",gem:60},"ο":{utf:"U+03BF",wkt:"o",gem:70},"π":{utf:"U+03C0",wkt:"p",gem:80},"ρ":{utf:"U+03C1",wkt:"r",gem:100},"ς":{utf:"U+03C2",wkt:"s",gem:100},"σ":{utf:"U+03C3",wkt:"s",gem:200},"τ":{utf:"U+03C4",wkt:"t",gem:300},"υ":{utf:"U+03C5",wkt:"u",gem:400},"φ":{utf:"U+03C6",wkt:"ph",gem:500},"χ":{utf:"U+03C7",wkt:"kh",gem:600},"ψ":{utf:"U+03C8",wkt:"ps",gem:700},"ω":{utf:"U+03C9",wkt:"ō",gem:800},"Α":{utf:"U+0391",wkt:"a",gem:""},"Β":{utf:"U+0392",wkt:"b",gem:""},"Γ":{utf:"U+0393",wkt:"g",gem:""},"Δ":{utf:"U+0394",wkt:"d",gem:""},"Ε":{utf:"U+0395",wkt:"e",gem:""},"Ζ":{utf:"U+0396",wkt:"z",gem:""},"Η":{utf:"U+0397",wkt:"ē",gem:""},"Θ":{utf:"U+0398",wkt:"th",gem:""},"Ι":{utf:"U+0399",wkt:"i",gem:""},"Κ":{utf:"U+039A",wkt:"k",gem:""},"Λ":{utf:"U+039B",wkt:"l",gem:""},"Μ":{utf:"U+039C",wkt:"m",gem:""},"Ν":{utf:"U+039D",wkt:"n",gem:""},"Ξ":{utf:"U+039E",wkt:"rs",gem:""},"Ο":{utf:"U+039F",wkt:"o",gem:""},"Π":{utf:"U+03A0",wkt:"p",gem:""},"Ρ":{utf:"U+03A1",wkt:"r",gem:""},S:{utf:"U+XXXX",wkt:"s",gem:""},"Σ":{utf:"U+03A3",wkt:"s",gem:""},"Τ":{utf:"U+03A4",wkt:"t",gem:""},"Υ":{utf:"U+03A5",wkt:"u",gem:""},"Φ":{utf:"U+03A6",wkt:"ph",gem:""},"Χ":{utf:"U+03A7",wkt:"kh",gem:""},"Ψ":{utf:"U+03A8",wkt:"ps",gem:""},"Ω":{utf:"U+03A9",wkt:"ō",gem:""},"ͅ":{utf:"U+0345",wkt:"i",gem:10}};var b=n(2),x=n(4),v=n.n(x),k=n(3),y=n(5);let w=n(1),C=(n(23)("csv"),console.log),L=(n(6),n(4),n(24));function j(e,t,n,i){let o={};!function(e,t){t.forEach(t=>{t.forEach(t=>{if(!t.lang)return;t.text.split(" ").forEach(t=>{t=(t=Object(y.oxia)(Object(y.comb)(t))).toLowerCase(),e[t]?e[t].freq+=1:e[t]={wf:t,freq:1}})})})}(o,n),function(e,t,n,i){Object(k.readDictionary)(e,t).then(e=>{let t=w.flatten(w.compact(e.map(e=>e.docs)));L.pipe(function(e){let t=0;return L.from.obj((function(n,i){if(t==e.length)return i(null,null);let o=e[t];t++,i(null,o)}))}(n),L.parallel(5,E),function(e,t,n){let i={};return L.through.obj((function(e,t,n){e.forEach(e=>{let t={rdict:e.rdict,dict:Object(y.comb)(e.rdict),plain:e.plain};e.verb&&(t.verb=!0),e.name&&(t.name=!0),t.verb&&e.aug&&(t.aug=e.aug),e.key?t.key=e.key.split("-")[0]:e.keys&&(t.key=e.keys.split("-")[0]);let n=[e.dict,e.name,e.verb].join("-");i[n]||(i[n]=t)}),n()}),(function(e){let o=w.values(i);o.forEach(e=>{let n=w.find(t,t=>e.rdict==t.rdict);n&&(e.trns=n.trns)}),n(o),e(null,null)}))}(0,t,(function(e){i(e)})))}).catch(e=>{C("_______ANTRAX-ERR",e)})}(e,t,w.values(o),(function(e){i(e)}))}function E(e,t){let n=e.wf;if(!n)return t(null,null);Object(k.antrax)(n).then(e=>{let n=w.flattenDeep(e.chains.map(e=>e.map(e=>e.dicts)));n=w.filter(n,e=>e.name||e.verb),n=w.filter(n,e=>!e.possible);let i=w.flatten(e.terms);n.push(...i),n.forEach(e=>{delete e.reg,delete e.trns,delete e.dname,delete e.keys,delete e.fls,delete e.weight});let o={},r=[];n.forEach(e=>{let t=[e.plain,e.key,e.name,e.verb].join("-");o[t]||(r.push(e),o[t]=!0)}),t(null,r)}).catch((function(e){console.log("CSV-ANTRAX-ERR",e)}))}const{app:_}=n(0).remote,{dialog:S,getCurrentWindow:U}=n(0).remote,O=n(6),A=n(0).remote.require("electron-settings"),N=n(8);let z=l("#progress"),q=_.getPath("userData");console.log;function R(e,t){let n=l("#table-local-chunk");n&&u(n),(n=d("table","dicts-table")).id="table-local-chunk",n.dataset.dicts=JSON.stringify(e);let i=d("tr","table-chunk-header");n.appendChild(i);let o=d("td");o.textContent="wordform",i.appendChild(o);let r=d("td");if(r.textContent="pos",i.appendChild(r),t){let e=d("td");e.textContent="key",i.appendChild(e)}let a=d("td");return a.textContent="translation",i.appendChild(a),e.forEach(e=>{let i=d("tr","table-line");n.appendChild(i);let o=d("td");o.textContent=e.rdict,i.appendChild(o);let r=d("td");if(r.textContent=e.verb?"verb":e.name?"name":"-",i.appendChild(r),t){let t=d("td");t.textContent=e.key,i.appendChild(t)}let a=d("td");a.textContent=e.trns,i.appendChild(a)}),n}function B(e,t){let n=l("#table-local-chunk");if(!n)return;let i=JSON.parse(n.dataset.dicts);if(!i.length)return;let r=o.a.find(i,e=>e.rdict==t),a=l(e.sid),s=function(e){let t=l("#dict-item-container"),n=l("#choose-item-pos"),i=l("#item-dict");if(e){n.classList.add("is-hidden"),i.classList.remove("is-hidden");l("#dict-item-header");l("#dict-item-rdict").textContent=e.rdict;let t=l("#dict-item-pos"),o=e.verb?"verb":e.name?"name":e.pos;t.textContent=o;let r=l("#dict-item-input-text");r.value="",e.trns&&(r.value=e.trns.join("; "))}else n.classList.remove("is-hidden"),i.classList.add("is-hidden");return t}(r);a.appendChild(s),l("#dict-item-input-text").focus(),function(e,t,n){let i=A.get("state");if(!t){t={new:!0},l("#new-item-input-wf").focus()}let o=l("#dict-item-submit-ok");o&&u(o);(o=d("input","submit")).setAttribute("type","submit"),o.setAttribute("value","ok"),o.id="dict-item-submit-ok",n.appendChild(o);let r=l("#dict-item-submit-cancel");r&&u(r);(r=d("input","submit")).setAttribute("type","submit"),r.setAttribute("value","cancel"),r.id="dict-item-submit-cancel",n.appendChild(r);let a=l("#dict-item-input-text");a.onkeydown=function(e){"Escape"==e.key&&a.blur()};let s=l("#new-item-input-wf");s.onkeydown=function(e){"Escape"==e.key&&s.blur()};let c=l("#new-item-input-trns");c.onkeydown=function(e){"Escape"==e.key&&c.blur()},o.addEventListener("click",n=>{if(t.new){t.rdict=s.value.trim(),t.dict=Object(y.comb)(t.rdict);let n=l('[name = "dictpos"]:checked').value;"verb"==n?t.verb=!0:"name"==n&&(t.name=!0),n?t.plain=Object(y.plain)(t.rdict):(t.term=t.dict,t.pos="indecl"),t.trns=c.value.split(";"),e.push(t)}else t.verb||t.name||(t.term=Object(y.comb)(t.rdict)),t.trns=a.value.split(";");i.sec="local-chunk",ce(i,e)}),r.addEventListener("click",t=>{i.sec="local-chunk",ce(i,e)})}(i,r,s)}document.addEventListener("click",e=>{let t=e.target;if(!t||"deldict-submit"!=t.id)return;z.classList.remove("is-hidden");let n=b.config.ldname;Object(k.delDictionary)(q,n).then(e=>{if(!e)return;let t=A.get("state"),n=A.get("cfg");be(n=o.a.filter(n,e=>e.dname!=b.config.ldname)),A.set("cfg",n),z.classList.add("is-hidden"),t.sec="main",ce(t)})}),document.addEventListener("click",e=>{let t=e.target.dataset;if(!t)return;let n=b.config.ldname,i=A.get("state");if(t.localdictfull)Object(k.readDictionary)(q,n).then(e=>{let t=o.a.flatten(e.map(e=>e.docs));i.sec="local-dict-full",ce(i,t)});else if(t.createlocalchunk){if(!i.pars)return;j(q,n,i.pars,e=>{i.sec="local-chunk",ce(i,e)})}else if(t.deletelocaldict){let e=b.config.ldname;Object(k.delDictionary)(q,e).then(e=>{if(!e)return;let t=A.get("state"),n=A.get("cfg");be(n=o.a.filter(n,e=>e.dname!=b.config.ldname)),A.set("cfg",n),z.classList.add("is-hidden"),t.sec="main",ce(t)})}else if(t.exportlocaldict){let e={title:"save local dict"};S.showSaveDialog(null,e,e=>{let t=v.a.extname(e);t||(e=[e,t=".json"].join("")),[".json",".csv"].includes(t)&&Object(k.readDictionary)(q,n).then(n=>{let i,r=o.a.flatten(n.map(e=>e.docs)).map(e=>{if(!e.trns)return;let t=e.verb?"verb":e.name?"name":"-";return{dict:e.rdict,pos:t,key:e.key,trns:e.trns.join(";")}});if(r=o.a.compact(r),".json"==t)i=JSON.stringify(r,null,2);else if(".csv"==t){let e=r.map(e=>o.a.values(e).map(e=>JSON.stringify(e)));i=(e=e.map(e=>e.join(", "))).join("\n")}O.writeFile(e,i).then(()=>{console.log("file save success!",e)}).catch(e=>{console.error(e)})})})}}),N.bind(["ctrl+d"],(function(e){let t=A.get("state");if(!t.pars)return;let n=b.config.ldname;j(q,n,t.pars,e=>{t.sec="local-chunk",ce(t,e)})})),N.bind(["ctrl+shift+d"],(function(e){z.classList.remove("is-hidden");let t=A.get("state"),n=b.config.ldname;Object(k.readDictionary)(q,n).then(e=>{let n=o.a.flatten(e.map(e=>e.docs));t.sec="local-dict-full",ce(t,n)})}));var J=n(13),D=n.n(J);let T=o.a.values(m),F=g.dasia;console.log;function I(e,t,n){let i,r=Object(y.comb)(e).split("");return i="gem"==t?function(e,t){let n=[];return e.forEach(e=>{h[e]&&n.push(h[e].gem)}),o.a.sum(n)}(r):"beta"==t?function(e){let t=[];return e.forEach(e=>{h[e]&&t.push("B")}),t.join("")}(r):function(e){let t=[];return e.forEach(e=>{h[e]?t.push(h[e].wkt):e==F?t.unshift("h"):T.includes(e)&&t.push(g.oxia)}),t.join("")}(r)}const M=n(0).remote.require("electron-settings"),H=console.log;let P=l("#progress");function G(e){if(!e||!e.length)return;let t=l("#source"),n=l("#result");if(!t||!n)return;f(t),f(n),Z(),e.forEach(e=>{let n=function(e,t){let n=document.createElement("p");return n.textContent=e,t&&n.classList.add(t),n}();n.classList.add("par"),e.forEach(e=>{e.punct&&(e.text+=" ");let t=p(e.text);e.lang?t.classList.add("active-form"):e.punct?t.classList.add("punct"):t.classList.add("space"),n.appendChild(t)}),t.appendChild(n)});let i=c("span.active-form");if(1==i.length){let e=i[0];e&&X(e)}}function Z(){var e;e=".popup",document.querySelectorAll(e).forEach(e=>{e.parentElement.removeChild(e)})}function K(e,t){let n=d("div","popup");document.body.appendChild(n),n.classList.remove("is-hidden");let i=function(e){return e.getBoundingClientRect()}(e),o={top:i.top+24,left:i.left};t&&(o={top:i.top-32,left:i.left}),function(e,t){let n=[e.top,"px"].join(""),i=[e.left,"px"].join("");t.style.top=n,t.style.left=i}(o,n);let r=d("ul","compound-list");return n.appendChild(r),n}function X(e,t){P.classList.remove("is-hidden");let n=e.textContent.trim();(function(e,t){return Object(k.antrax)(e,t)})(n=function(e){let t=e.split(""),n=!1,i=[];return t.forEach(e=>{m.includes(e)?n||(i.push(e),n=!0):i.push(e)}),i.join("")}(Object(y.comb)(n)),t).then(n=>{if(P.classList.add("is-hidden"),!n)return H("NO RESULT"),void(l("#result").textContent="no resul, try Shift-click");t?function(e,t){if(!t.chains||!t.chains.length)return;if(1==t.chains.length&&1==t.chains[0].length)return;let n=K(e).querySelector(".compound-list");t.chains.forEach((e,i)=>{let o=d("li","comp-line");n.appendChild(o),e.forEach((n,r)=>{let a,s=!1;r==e.length-1&&(s=!0),a=p(n.seg,""),s||n.flexes||a.classList.add("comp-segment"),n.connector?a.classList.add("comp-connector"):n.dicts&&a.classList.add("active-dict"),a.dataset.segdicts=JSON.stringify(t.chains[i][r].dicts),a.dataset.cogns=JSON.stringify(t.chains[i][r].cogns),o.appendChild(a)})})}(e,n):function(e,t){let n=o.a.filter(t.chains,e=>1==e.length).map(e=>e[0]),i=o.a.flatten(n.map(e=>e.dicts)),r=o.a.flatten(n.map(e=>e.cogns));e.dataset.cogns=JSON.stringify(r),(i=o.a.uniq(i.map(e=>JSON.stringify(e))).map(e=>JSON.parse(e))).push(...t.terms),W(e,i)}(e,n)}).catch((function(e){console.log("ANTRAX-ERR",n,e)}))}function W(e,t){let n=e.textContent,i=l("#result");f(i);let r=function(e){let t=d("div","dict-query");return t.textContent=e,t}(n);i.appendChild(r);let a=M.get("cfg");(t=o.a.sortBy(t,(function(e){let t=o.a.find(a,t=>t.dname==e.dname);return t?t.idx:100}))).forEach(e=>{let t=function(e){let t=d("div","dict-container"),n=function(e){let t=d("div","dict-header"),n=p(e.dname,"dict-dname");"souda"==e.dname&&n.setAttribute("href",e.href);t.appendChild(n);let i=p(e.rdict,"dict-rdict");if(t.appendChild(i),e.verb){let e=p("verb","dict-pos");t.appendChild(e)}if(e.name){let e=p("name","dict-pos");t.appendChild(e)}else if(e.term&&e.pos){let n=p(e.pos,"dict-pos");t.appendChild(n)}else if(e.suf){let e=p("suff","dict-pos");t.appendChild(e)}else if(e.pref){let e=p("pref","dict-pos");t.appendChild(e)}if(e.gends){let n=p(e.gends.toString(),"dict-gends");t.appendChild(n)}return t}(e);t.appendChild(n);let i=function(e){let t,n=e.fls,i=o.a.filter(n,e=>e.degree);if(!(n=o.a.filter(n,e=>!e.degree)))return;if(e.verb){let e=o.a.filter(n,e=>e.numper),i=o.a.filter(n,e=>e.numcase),r=o.a.filter(n,e=>!e.numcase&&!e.numper);if(t=e.map(e=>[e.tense,e.numper].join(" ")),i.length){let e=i.map(e=>[e.tense,[e.gend,e.numcase].join(".")].join(", "));t.push(...e)}if(r.length){let e=r.map(e=>e.tense);t.push(...e)}}else t="adv"==e.pos?n.map(e=>e.degree):e.gends?n.map(t=>[e.gends.toString(),t.numcase].join(".")):e.name?n.map(e=>[e.gend,e.numcase].join(".")):"pron"==e.pos?n.map(e=>[e.gend||"-",e.numcase].join(".")):n.map(e=>[e.gend,e.numcase].join("."));if(i.length){let e=i.map(e=>e.degree);t.push(...e)}let r=o.a.filter(t,e=>!/du/.test(e));r.length&&(t=r);let a=o.a.filter(t,e=>!/voc/.test(e));a.length&&(t=a);return t.sort()}(e);if(i){let e=function(e){let t=d("ul","dict-fls");return e.forEach(e=>{let n=d("li");n.textContent=e,t.appendChild(n)}),t}(i);t.appendChild(e)}if(e.trns){let n=function(e){let t=d("ul","dict-trns");e.trns||(e.trns=["no transtation for this dict article"]);return e.trns.forEach(e=>{let n=d("li","dict-trns-li"),i=e.split(/, [A-Z]| [A-Z][^ ]*[0-9]/)[0],o=p(i,"dict-trns-li-shown");n.appendChild(o);let r=e.replace(i,"").split("(").join('<span class="grey">').split(")").join("</span>");if(r){let e=p("","is-hidden");e.innerHTML=r,e.classList.add("dict-trns-li-hidden"),n.appendChild(e),o.classList.add("ellipsis")}t.appendChild(n)}),t}(e);t.appendChild(n)}return t}(e);i.appendChild(t)})}const $=n(10),V=console.log,Y=n(0).remote.require("electron-settings"),Q=n(8),{getCurrentWindow:ee}=n(0).remote,te=r.remote.app,ne=te.getPath("userData"),ie=te.getAppPath();let oe,re=[],ae=0;function se(){ae<=0||(ae--,ce())}function le(){ae>=re.length-1||(ae++,ce())}function ce(e,t){if(e){let t=o.a.clone(e);re.push(t),ae=re.length-1}else e=re[ae];let n=e.sec,i=function(e){let t=Y.get("lang")||"eng";const n=c(".section");let i,o;return Array.prototype.forEach.call(n,e=>{e.classList.add("is-hidden")}),(i=l(o=["#",e.sec,"_",t].join("")))||(i=l(o=["#",e.sec,"_",b.config.deflang].join(""))),i||V("____________ NO SEC ID !!!!",o),i.classList.remove("is-hidden"),o}(e);e.sid=i,"main"==n?(function(e){if(oe)return;let t=Y.get("split-sizes")||b.config.splitSizes;oe=D()(["#source","#result"],{sizes:t,gutterSize:5,cursor:"col-resize",minSize:[0,0],onDragEnd:function(e){Y.set("split-sizes",e),ee().reload()}}),e.mono&&oe.collapse(e.mono)}(e),G(e.pars)):"remote-dicts"==n?function(){let e=pe.get("cfg");e=JSON.parse(JSON.stringify(e)),Object(k.getCfgInfos)(ue).then(t=>{e.forEach(e=>{let n=o.a.find(t,t=>e.dname==t.dname);n&&(e.name=n.name,e.langs=n.langs,e.size=n.size)}),pe.set("cfg",e),xe(e);let n=e.map(e=>e.dname);me(he,(function(t,i,r){if(t&&console.error("soket error:",t),t)return;if(i&&200!=i.statusCode)return;let a;try{a=JSON.parse(r)}catch(e){console.log("remote dbs list ERR",e),a=[]}let s=o.a.filter(a,e=>"_"!=e[0]),l=o.a.intersection(s,n);e.forEach(e=>{l.includes(e.dname)&&(e.sync=!0)}),pe.set("cfg",e),xe(e)}))})}():"local-chunk"==n?function(e,t){if(!t)return;let n=l(e.sid),i=l("#new-dict-item-link"),r=R(t);n.insertBefore(r,i);let a=o.a.filter(t,e=>e.trns);if(!a.length)return;let s=l("#dict-table-submit-ok");s&&u(s),(s=d("input","submit")).setAttribute("type","submit"),s.setAttribute("value","merge filled to current local dict"),s.id="dict-table-submit-ok",n.appendChild(s);let c=a.map(e=>({_id:e.plain||e.term,docs:[e]}));s.addEventListener("click",t=>{Object(k.updateCurrent)(q,c).then(t=>{let n=A.get("cfg"),i=o.a.find(n,e=>e.dname==b.config.ldname);i||(i={active:!0,dname:"local",name:"Local",idx:0,langs:"grc,any"},n.unshift(i),n.forEach((e,t)=>{e.idx=t}),be(n)),i.size=t.size,A.set("cfg",n),e.sec="main",ce(e)}).catch(e=>{console.log("ERR: update local dict",e)})})}(e,t):"local-dict-full"==n?function(e,t){if(!t)return;let n=l(e.sid),i=l("#full-local-dict-banner"),o=R(t,!0);n.insertBefore(o,i)}(e,t):"local-dict-item"==n&&B(e,t),l("#progress").classList.add("is-hidden"),Y.set("state",e)}r.ipcRenderer.on("action",(function(e,t){"goleft"==t?se():"goright"==t&&le()})),Q.bind(["ctrl+1","ctrl+2"],(function(e){})),Q.bind(["esc"],(function(e){Z()})),Q.bind(["alt+left","alt+right"],(function(e){37==e.which?se():39==e.which&&le()})),Q.bind(["ctrl+p"],(function(e){let t=l("span.active-form:hover")||l("span.active-dict:hover");if(!t)return;let n=["http://www.perseus.tufts.edu/hopper/morph?l=",t.textContent,"&la=greek#lexicon"].join("");r.shell.openExternal(n)})),Q.bind(["ctrl+f"],(function(e){let t=Y.get("cfg");t=Object(k.getCfg)(ie,ne),t=JSON.parse(JSON.stringify(t)),Y.set("cfg",t);let n=t.map(e=>[e.dname,e.idx,e.active].join("-"));console.log("_________+F-CFG:",t,"dnames:",n)})),Q.bind(["ctrl+r"],(function(e){let t=re[ae];re=[t],ae=0})),Q.bind(["ctrl+c"],(function(e){let t=l(".active-form:hover");if(!t)return;let n=t.textContent;if(!n)return;let i=[n," "].join("");$.writeText(i)})),Q.bind(["ctrl+z"],(function(e){let t={sec:b.config.defstate};Y.set("state",t);let n=Y.get("cfg");be(n=JSON.parse(JSON.stringify(n))),console.log("== INIT STATE == ",n)})),Q.bind(["ctrl+shift+z"],(function(e){let t={sec:b.config.defstate};Y.set("state",t);let n=[];Y.set("cfg",n),console.log("== ZERO STATE CFG == ",n)})),Q.bind(["space"],(function(e){!function(){let e=c(".dict-trns");if(!e.length)return;let t=c(".dict-fls"),n=e[0];n&&(n.classList.contains("is-hidden")?(e.forEach(e=>{e.classList.remove("is-hidden")}),t.forEach(e=>{e.classList.remove("is-hidden")})):(e.forEach(e=>{e.classList.add("is-hidden")}),t.forEach(e=>{e.classList.add("is-hidden")})))}()})),Q.bind(["tab"],(function(e){!function(){let e=c(".dict-trns");if(!e.length)return;let t=c(".dict-fls"),n=(l("ul.dict-trns:not(.is-hidden)"),0);e.forEach((e,i)=>{e.classList.contains("is-hidden")||(n=i+1),e.classList.add("is-hidden"),t[i]&&t[i].classList.add("is-hidden")}),n==e.length&&(n=0),e[n].classList.remove("is-hidden"),t[n]&&t[n].classList.remove("is-hidden")}()})),Q.bind(["ctrl+="],(function(e){let t=r.webFrame.getZoomFactor()+.1;r.webFrame.setZoomFactor(t)})),Q.bind(["ctrl+-"],(function(e){let t=r.webFrame.getZoomFactor()-.1;r.webFrame.setZoomFactor(t)})),Q.bind(["ctrl+0"],(function(e){r.webFrame.setZoomFactor(1)}));const{app:de}=n(0).remote,pe=n(0).remote.require("electron-settings"),fe=(n(6),n(8)),ue=de.getPath("userData"),ge=(de.getAppPath(),console.log),me=n(25);n(26),l("#progress");const he={url:[b.config.host,"_all_dbs"].join("/")};[b.config.host,"_dbs_info"].join("/");function be(e){let t=o.a.filter(e,e=>e.active).map(e=>e.dname);Object(k.checkConnection)(ue,t)}function xe(e){!function(){let e=l("#dicts-remote");e&&f(e);let t=d("table","dicts-table");t.id="table-dicts-remote";let n=d("tr","table-header");n.id="table-header-remote",t.appendChild(n);let i=d("td");i.textContent="dict's name",n.appendChild(i);let o=d("td");o.textContent="docs",n.appendChild(o);let r=d("td");r.textContent="langs",n.appendChild(r);let a=d("td");a.textContent="sync:",n.appendChild(a);let s=d("td");s.textContent="activate:",n.appendChild(s),e.appendChild(t)}();let t=l("#table-dicts-remote");e.forEach(e=>{let n=d("tr");n.dataset.dname=e.dname,t.appendChild(n);let i=d("td","dname");n.appendChild(i),i.textContent=e.name,i.dataset.dname=e.dname;let o=d("td","dsize");o.textContent=e.size,n.appendChild(o);let r=d("td","dlang");r.textContent=e.langs,n.appendChild(r);let a=d("td","");if(e.sync){let e=ve();a.appendChild(e)}else{a.dataset.sync=e.dname;let t=(e.dname,b.config.ldname,"---");a.textContent=t}n.appendChild(a);let s=d("td","link");if(e.active){let t=ve();t.dataset.disable=e.dname,s.appendChild(t)}else{s.dataset.activate=e.dname;let t=e.sync||e.dname==b.config.ldname?"activate":"";s.textContent=t}n.appendChild(s)})}function ve(){let e=d("img","dict-check");return e.setAttribute("src","../resources/check.png"),e}function ke(e,t){let n=pe.get("cfg");n=JSON.parse(JSON.stringify(n));let i=o.a.find(n,t=>t.dname==e);if(!i)return;i.active=!!t;o.a.filter(n,e=>e.active).map(e=>e.dname);pe.set("cfg",n),be(n),xe(n)}fe.bind(["ctrl+g"],(function(e){let t=pe.get("cfg");t=JSON.parse(JSON.stringify(t)),Object(k.getCfgInfos)(ue).then(e=>{ge("_________+G-infos:",e),t.forEach(t=>{let n=o.a.find(e,e=>t.dname==e.dname);n&&(t.name=n.name,t.langs=n.langs,t.size=n.size)}),ge("_________+G-cfg:",t)})})),fe.bind(["ctrl+e"],(function(e){Object(k.getDescr)("lsj").then(e=>{ge("_________________DESCR",e)})}));let ye=n(27)({html:!0}),we=n(28);ye.use(we);console.log;const Ce=n(6),Le=n(4);const je=n(0).remote.require("electron-settings"),Ee=r.remote.Menu,_e=r.remote.MenuItem,Se=(console.log,r.remote.app);let Ue,Oe=l("#progress"),Ae=Se.getPath("userData");const Ne=new _e({label:"Perseus Greek Word Study Tool",click:e=>{if(!Ue)return;let t=["http://www.perseus.tufts.edu/hopper/morph?l=",Ue.textContent,"&la=greek#lexicon"].join("");r.shell.openExternal(t)}}),ze=new _e({label:"Wiktionary (esp. for particles)",click:()=>{if(!Ue)return;let e=["https://en.wiktionary.org/wiki/",Ue.textContent,"#Ancient_Greek"].join("");r.shell.openExternal(e)}}),qe=new _e({label:"Souda dictionary",click:()=>{if(!Ue)return;Ue.textContent;let e=c(".dict-dname"),t=o.a.find(e,e=>"souda"==e.textContent);if(!t)return;let n=["https://www.cs.uky.edu/~raphael/sol/sol-entries/",t.getAttribute("href")].join("");r.shell.openExternal(n)}}),Re=new _e({label:"create local dictionary for current text",click:()=>{Oe.classList.remove("is-hidden");let e=je.get("state");if(!e.pars)return;let t=b.config.ldname;j(Ae,t,e.pars,t=>{e.sec="local-chunk",ce(e,t)})}}),Be=new _e({label:"show full local dictionary",click:()=>{Oe.classList.remove("is-hidden");let e=je.get("state"),t=b.config.ldname;Object(k.readDictionary)(Ae,t).then(t=>{let n=o.a.flatten(t.map(e=>e.docs));e.sec="local-dict-full",ce(e,n)})}}),Je=new _e({label:"back in history",click:()=>{se()}}),De=new _e({label:"forward in history",click:()=>{le()}});console.log;const Te=r.remote.app,Fe=n(10),Ie=n(0).remote.require("electron-settings"),Me=n(29),He=Te.getPath("userData"),Pe=Te.getAppPath();!function(e){let t=l("#container");e.langs.forEach(n=>{e.pages.forEach(e=>{let i,o,r;try{i=Le.resolve(__dirname,"../src/sections",n,[e,"md"].join(".")),o=Ce.readFileSync(i).toString(),r=ye.render(o)}catch(e){return}let a=d("div","section");a.id=[e,n].join("_"),a.setAttribute("lang",n),a.classList.add("is-hidden"),a.innerHTML=r,t.appendChild(a.cloneNode(!0))})})}(b.config),document.onmousedown=function(e){if(2!=e.button)return;const t=new Ee;t.append(Je),t.append(De),t.append(new _e({type:"separator"})),t.append(Re),t.append(Be),t.append(new _e({type:"separator"})),(Ue=e.target).classList.contains("active-form")&&(t.append(Ne),t.append(ze),t.append(qe)),e.preventDefault(),t.popup(r.remote.getCurrentWindow())};let Ge=function(){let e=Ie.get("state");e||(e={sec:b.config.defstate},Ie.set("state",e));let t=Ie.get("cfg");t||(t=Object(k.getCfg)(Pe,He),Ie.set("cfg",t));be(t=JSON.parse(JSON.stringify(t)));let n=Ie.get("lang");n||(n=b.config.deflang,Ie.set("lang",n));return e}();ce(Ge),r.ipcRenderer.on("section",(function(e,t){Ge.sec=t,ce(Ge)})),r.ipcRenderer.on("lang",(function(e,t){Ie.set("lang",t),r.ipcRenderer.send("lang",t),ce(Ie.get("state"))})),Fe.on("text-changed",()=>{let e=Fe.readText();if(" "==o.a.last(e))return;let t=function(e){let t=e.trim();return t=(t=(t=(t=t.replace(/ᾰ/gi,"α").replace(/ᾱ/gi,"α").replace(/ῑ/gi,"ι").replace(/ῐ/gi,"ι").replace(/ῠ/gi,"υ").replace(/ῡ/gi,"υ")).replace(/̆/gi,"")).replace(/-/g,"")).replace(/\' /g,"᾽ ").replace(/\’ /g,"᾽ ")}(e),n=s()(t,b.config.code);n&&(Ge.sec="main",Ge.pars=n,Ie.set("state",Ge),ce(Ge))}).startWatching();l("#progress"),l("#message");document.addEventListener("click",e=>{let t=e.target,n=t.parentElement;if(t.classList.contains("external")){let n=t.getAttribute("href");n||(n=t.textContent),e.preventDefault(),r.shell.openExternal(n)}else if(t.classList.contains("dict-dname"))Ge.sec="dict-edit",ce(Ge);else if(n&&n.classList.contains("table-line")){let e=n.firstChild;if(!e)return;let t=e.textContent;if(!t)return;Ge.sec="local-dict-item",ce(Ge,t)}else if(t.classList.contains("active-form")||t.classList.contains("active-dict"))e.ctrlKey?function(e){if("undefined"==e.dataset.cogns||!e.dataset.cogns||!e.dataset.cogns.length)return;let t=JSON.parse(e.dataset.cogns);if(!t.length)return;let n=K(e).querySelector(".compound-list");n.classList.add("cognate-list");let i=o.a.groupBy(t,"rdict");for(let e in i){let t=i[e],o=d("li","cognate-line");o.textContent=e,o.dataset.dicts=JSON.stringify(t),n.appendChild(o)}}(t):X(t,!0);else if(t.classList.contains("dict-query")){let e=t.nextSibling;e&&e.classList.contains("is-hidden")?e.classList.remove("is-hidden"):e&&e.classList.add("is-hidden")}else if(t.classList.contains("dict-header")||t.classList.contains("dict-rdict")||t.classList.contains("dict-pos")||t.classList.contains("dict-gends")){let e=t.closest(".dict-container"),n=e.querySelector(".dict-fls"),i=e.querySelector(".dict-trns");n&&n.classList.contains("is-hidden")?n.classList.remove("is-hidden"):n&&n.classList.add("is-hidden"),i.classList.contains("is-hidden")?i.classList.remove("is-hidden"):i.classList.add("is-hidden")}else if(t.classList.contains("dict-trns-li-shown")){let e=t.nextSibling;if(!e)return;e.classList.contains("is-hidden")?(e.classList.remove("is-hidden"),t.classList.remove("ellipsis")):(e.classList.add("is-hidden"),t.classList.add("ellipsis"))}else if(t.classList.contains("dict-trns-li-hidden")){let e=t.previousSibling;e&&(t.classList.add("is-hidden"),e.classList.add("ellipsis"))}}),document.addEventListener("click",e=>{let t=e.target,n=t.dataset;if(n)if(n.href){l("#new-version").classList.add("is-hidden"),r.shell.openExternal(n.href)}else if(n.dname)!function(e,t){let n=pe.get("cfg");n=JSON.parse(JSON.stringify(n));let i=o.a.find(n,t=>t.dname==e);if(i){if(t){if(i.idx>=n.length-1)return;n[i.idx+1].idx=i.idx,i.idx=i.idx+1}else{if(i.idx<1)return;n[i.idx-1].idx=i.idx,i.idx=i.idx-1}n=o.a.sortBy(n,"idx"),pe.set("cfg",n),xe(n)}}(n.dname,e.shiftKey);else if(n.activate){if("activate"!=t.textContent)return;ke(n.activate,!0)}else n.disable?ke(n.disable,!1):n.sync||n.section&&(Ge.sec=n.section,ce(Ge))}),document.addEventListener("mouseover",(function(e){let t=e.target;if(t.textContent&&!e.ctrlKey)if(e.altKey){if(!t.classList.contains("active-form"))return;!function(e,t){Z();let n,i=K(e,!0);t&&(n="gem");let o=I(e.textContent,n);i.textContent=o}(t,e.shiftKey)}else t.classList.contains("active-form")?(t.classList.contains("active-form")&&Z(),X(t)):t.classList.contains("active-dict")?function(e){if(f(l("#result")),!e.dataset.segdicts)return;let t=JSON.parse(e.dataset.segdicts);t.length&&W(e,t)}(t):t.classList.contains("cognate-line")&&function(e){if(f(l("#result")),!e.dataset.dicts)return;let t=JSON.parse(e.dataset.dicts);t.length&&W(e,t)}(t)}),!1),r.ipcRenderer.on("version",(function(e,t){Me.get("https://api.github.com/repos/mbykov/biblos.js/releases/latest").then((function(e){if(!e||!e.data)return;let n=e.data.name;if(t&&n&&n>t){let e=l("#new-version"),t=["new version available:",n].join(" ");e.textContent=t,e.classList.remove("is-hidden")}})).catch((function(e){console.log("API.GITHUB ERR")}))})),document.addEventListener("wheel",(function(e){!function(e){let t=e.target.closest("#source")||e.target.closest("#result")||e.target.closest(".section");if(!t)return;let n,i=t.id,o=l("#source"),r=l("#result");n=1==e.shiftKey||1==e.ctrlKey?"source"==i?r:o:t;if(!n)return;let a=e.deltaY>0?32:-32;n.scrollTop+=a}(e)}),!1)}]);
//# sourceMappingURL=app.js.map